<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT, Sphenginx" />





  <link rel="alternate" href="/atom.xml" title="小崔随想录" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="认真生活，开心工作！">
<meta property="og:type" content="website">
<meta property="og:title" content="小崔随想录">
<meta property="og:url" content="http://sphenginx.github.io/page/2/index.html">
<meta property="og:site_name" content="小崔随想录">
<meta property="og:description" content="认真生活，开心工作！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小崔随想录">
<meta name="twitter:description" content="认真生活，开心工作！">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> 小崔随想录 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">小崔随想录</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">独立之精神, 自由之思想！</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/18/ioc/" itemprop="url">
                  如何在Lumen框架下写一个自己的Log类？
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-18T16:03:01+08:00" content="2015-12-18">
              2015-12-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/18/ioc/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/18/ioc/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u524D_u8BB0"><a href="#u524D_u8BB0" class="headerlink" title="前记"></a>前记</h2><p>今天在使用<strong>lumen</strong>自带的类Log的时候，发现每次记录一个Log，总会在<code>storage/logs/lumen.log</code>文件末尾追加一条记录，那么问题来了，时间久了，lumen.log 这个文件就会非常大，而且也不利于管理，于是打算写一个自己的log类，在各位网友博客小伙伴的帮助下，终于完成了，记录一下写Log的历程，希望能帮助一些后来打算改造Log类的小伙伴吧。</p>
<h2 id="Lumen"><a href="#Lumen" class="headerlink" title="Lumen"></a>Lumen</h2><p>开始前，先让我们了解下lumen：</p>
<p>Lumen 是一个由 Laravel 元件搭建而成的微框架, 由 Laravel 官方维护. Lumen 为速度而生, 是当前最快的 PHP 框架之一, 甚至比类似的微框架 Silex 速度还要快.</p>
<p>Lumen 比其他微框架的优点是, 构建在 Laravel 之上, 使其具备 Laravel 强大的功能, 如 路由, 依赖注入, Eloquent ORM, 数据库迁移管理, 队列和计划任务等.</p>
<p>Laravel 本来就是一个功能齐全, 速度飞快的框架, 但是 Lumen 因为去除了很多 Laravel 的配置和可自定义的选项, 速度越加飞快, 毫秒必争.</p>
<p>飞快的速度, 再加上 Laravel 非常方便的功能, 使用 Lumen 开发应用会是非常愉悦的体验.</p>
<p>Lumen 专为微服务或者 API 设计, 举个例子, 如果你的应用里面有部分业务逻辑的请求频率比较高, 就可以单独把这部分业务逻辑拿出来, 使用 Lumen 来构建一个小 App.</p>
<p>因为 Lumen 是对 Laravel 优化了框架的加载机制, 所以 Lumen 对资源的要求少很多.</p>
<p>当然, 你可以使用 队列系统 与你的主 Laravel 应用进行交互. Laravel 和 Lumen 从一开始就是设计成能一起很好的工作, 并且, 配合使用, 允许你构架一个强大的, 以微服务为驱动的应用程序.</p>
<p>Lumen 同时也非常适用于构建 API 接口, 此类型的应用通常情况下不需要具备 全栈框架 的所有功能, 如 HTTP 会话管理, Cookies, 和模版系统.</p>
<h2 id="u5386_u7A0B"><a href="#u5386_u7A0B" class="headerlink" title="历程"></a>历程</h2><p>简单的了解了Lumen，那么接下来就来介绍Log的封装过程吧，在介绍前，各位看官如果对lumen的加载机制不清楚，不妨看下这篇文章：<a href="https://phphub.org/topics/769" target="_blank" rel="external">Laravel 架构中的 Container/ServiceProvider/Facade</a>。</p>
<h3 id="u4E86_u89E3_u7CFB_u7EDF_u7684Log_u7C7B"><a href="#u4E86_u89E3_u7CFB_u7EDF_u7684Log_u7C7B" class="headerlink" title="了解系统的Log类"></a>了解系统的Log类</h3><p>Lumen文档 <a href="http://laravelacademy.org/post/465.html" target="_blank" rel="external">错误和日志</a> 介绍了如何使用Lumen的错误和日志类，而且该日志记录器提供了<a href="http://tools.ietf.org/html/rfc5424" target="_blank" rel="external">RFC 5424</a>中定义的七种日志级别：<code>alert, critical, error,warning, notice, info 和 debug</code>。我们看到以下代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Log</span>;</span><br></pre></td></tr></table></figure></p>
<p>既然Log类可以直接应用，说明Lumen在初始化的时候就定义了 Log 的 <code>namespace</code> 或者 起了 Log的 <code>aliases</code>, 首先找namespace，没有找到定义Log 的 namespace的地方，那肯定是起了 Log 的别名，找了些资料，终于发现Log的加载流程：</p>
<ol>
<li>根目录下<code>bootstrap\app.php</code>文件有一行代码：<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$app</span>-&gt;withFacades();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这一行是调用 <code>vendor\laravel\lumen-framework\src\Application-&gt;withFacades()</code> 方法，会加载Lumen的一些Facades，下面列了 application的几个方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Create a new Lumen application instance.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@param</span>  string|null  $basePath</span><br><span class="line"> * <span class="doctag">@return</span> void</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(<span class="variable">$basePath</span> = null)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    date_default_timezone_set(env(<span class="string">'APP_TIMEZONE'</span>, <span class="string">'Asia/Chongqing'</span>));</span><br><span class="line"></span><br><span class="line">    <span class="variable">$this</span>-&gt;basePath = <span class="variable">$basePath</span>;</span><br><span class="line">    <span class="variable">$this</span>-&gt;bootstrapContainer();</span><br><span class="line">    <span class="variable">$this</span>-&gt;registerErrorHandling();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Bootstrap the application container.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@return</span> void</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">bootstrapContainer</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>::setInstance(<span class="variable">$this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$this</span>-&gt;instance(<span class="string">'app'</span>, <span class="variable">$this</span>);</span><br><span class="line">    <span class="variable">$this</span>-&gt;instance(<span class="string">'path'</span>, <span class="variable">$this</span>-&gt;path());</span><br><span class="line"></span><br><span class="line">    <span class="variable">$this</span>-&gt;registerContainerAliases();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Register the facades for the application.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@return</span> void</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">withFacades</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    Facade::setFacadeApplication(<span class="variable">$this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (! <span class="keyword">static</span>::<span class="variable">$aliasesRegistered</span>) &#123;</span><br><span class="line">        <span class="keyword">static</span>::<span class="variable">$aliasesRegistered</span> = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\App'</span>, <span class="string">'App'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Auth'</span>, <span class="string">'Auth'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Bus'</span>, <span class="string">'Bus'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\DB'</span>, <span class="string">'DB'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Cache'</span>, <span class="string">'Cache'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Cookie'</span>, <span class="string">'Cookie'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Crypt'</span>, <span class="string">'Crypt'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Event'</span>, <span class="string">'Event'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Hash'</span>, <span class="string">'Hash'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Log'</span>, <span class="string">'Log'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Mail'</span>, <span class="string">'Mail'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Queue'</span>, <span class="string">'Queue'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Request'</span>, <span class="string">'Request'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Schema'</span>, <span class="string">'Schema'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Session'</span>, <span class="string">'Session'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Storage'</span>, <span class="string">'Storage'</span>);</span><br><span class="line">        class_alias(<span class="string">'Illuminate\Support\Facades\Validator'</span>, <span class="string">'Validator'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Register container bindings for the application.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@return</span> void</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">registerLogBindings</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="variable">$this</span>-&gt;singleton(<span class="string">'Psr\Log\LoggerInterface'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Logger(<span class="string">'lumen'</span>, [<span class="variable">$this</span>-&gt;getMonologHandler()]);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Get the Monolog handler for the application.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@return</span> \Monolog\Handler\AbstractHandler</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getMonologHandler</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">new</span> StreamHandler(storage_path(<span class="string">'logs/lumen.log'</span>), Logger::DEBUG))</span><br><span class="line">                        -&gt;setFormatter(<span class="keyword">new</span> LineFormatter(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">true</span>, <span class="keyword">true</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Register the core container aliases.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@return</span> void</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">registerContainerAliases</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="variable">$this</span>-&gt;aliases = [</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Foundation\Application'</span> =&gt; <span class="string">'app'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Auth\Guard'</span> =&gt; <span class="string">'auth.driver'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Auth\PasswordBroker'</span> =&gt; <span class="string">'auth.password'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Cache\Factory'</span> =&gt; <span class="string">'cache'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Cache\Repository'</span> =&gt; <span class="string">'cache.store'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Config\Repository'</span> =&gt; <span class="string">'config'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Container\Container'</span> =&gt; <span class="string">'app'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Container\Container'</span> =&gt; <span class="string">'app'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Cookie\Factory'</span> =&gt; <span class="string">'cookie'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Cookie\QueueingFactory'</span> =&gt; <span class="string">'cookie'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Encryption\Encrypter'</span> =&gt; <span class="string">'encrypter'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Events\Dispatcher'</span> =&gt; <span class="string">'events'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Filesystem\Factory'</span> =&gt; <span class="string">'filesystem'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Hashing\Hasher'</span> =&gt; <span class="string">'hash'</span>,</span><br><span class="line">        <span class="string">'log'</span> =&gt; <span class="string">'Psr\Log\LoggerInterface'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Mail\Mailer'</span> =&gt; <span class="string">'mailer'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Queue\Factory'</span> =&gt; <span class="string">'queue'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Queue\Queue'</span> =&gt; <span class="string">'queue.connection'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Redis\Database'</span> =&gt; <span class="string">'redis'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\Redis\Database'</span> =&gt; <span class="string">'redis'</span>,</span><br><span class="line">        <span class="string">'request'</span> =&gt; <span class="string">'Illuminate\Http\Request'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Session\SessionManager'</span> =&gt; <span class="string">'session'</span>,</span><br><span class="line">        <span class="string">'Illuminate\Contracts\View\Factory'</span> =&gt; <span class="string">'view'</span>,</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * The available container bindings and their respective load methods.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@var</span> array</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="variable">$availableBindings</span> = [</span><br><span class="line">    <span class="string">'auth'</span> =&gt; <span class="string">'registerAuthBindings'</span>,</span><br><span class="line">    <span class="string">'auth.driver'</span> =&gt; <span class="string">'registerAuthBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Auth\Guard'</span> =&gt; <span class="string">'registerAuthBindings'</span>,</span><br><span class="line">    <span class="string">'auth.password'</span> =&gt; <span class="string">'registerAuthBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Auth\PasswordBroker'</span> =&gt; <span class="string">'registerAuthBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Broadcasting\Broadcaster'</span> =&gt; <span class="string">'registerBroadcastingBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Bus\Dispatcher'</span> =&gt; <span class="string">'registerBusBindings'</span>,</span><br><span class="line">    <span class="string">'cache'</span> =&gt; <span class="string">'registerCacheBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Cache\Factory'</span> =&gt; <span class="string">'registerCacheBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Cache\Repository'</span> =&gt; <span class="string">'registerCacheBindings'</span>,</span><br><span class="line">    <span class="string">'config'</span> =&gt; <span class="string">'registerConfigBindings'</span>,</span><br><span class="line">    <span class="string">'composer'</span> =&gt; <span class="string">'registerComposerBindings'</span>,</span><br><span class="line">    <span class="string">'cookie'</span> =&gt; <span class="string">'registerCookieBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Cookie\Factory'</span> =&gt; <span class="string">'registerCookieBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Cookie\QueueingFactory'</span> =&gt; <span class="string">'registerCookieBindings'</span>,</span><br><span class="line">    <span class="string">'db'</span> =&gt; <span class="string">'registerDatabaseBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Database\Eloquent\Factory'</span> =&gt; <span class="string">'registerDatabaseBindings'</span>,</span><br><span class="line">    <span class="string">'encrypter'</span> =&gt; <span class="string">'registerEncrypterBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Encryption\Encrypter'</span> =&gt; <span class="string">'registerEncrypterBindings'</span>,</span><br><span class="line">    <span class="string">'events'</span> =&gt; <span class="string">'registerEventBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Events\Dispatcher'</span> =&gt; <span class="string">'registerEventBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Debug\ExceptionHandler'</span> =&gt; <span class="string">'registerErrorBindings'</span>,</span><br><span class="line">    <span class="string">'files'</span> =&gt; <span class="string">'registerFilesBindings'</span>,</span><br><span class="line">    <span class="string">'filesystem'</span> =&gt; <span class="string">'registerFilesBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Filesystem\Factory'</span> =&gt; <span class="string">'registerFilesBindings'</span>,</span><br><span class="line">    <span class="string">'hash'</span> =&gt; <span class="string">'registerHashBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Hashing\Hasher'</span> =&gt; <span class="string">'registerHashBindings'</span>,</span><br><span class="line">    <span class="string">'log'</span> =&gt; <span class="string">'registerLogBindings'</span>,</span><br><span class="line">    <span class="string">'Psr\Log\LoggerInterface'</span> =&gt; <span class="string">'registerLogBindings'</span>,</span><br><span class="line">    <span class="string">'mailer'</span> =&gt; <span class="string">'registerMailBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Mail\Mailer'</span> =&gt; <span class="string">'registerMailBindings'</span>,</span><br><span class="line">    <span class="string">'queue'</span> =&gt; <span class="string">'registerQueueBindings'</span>,</span><br><span class="line">    <span class="string">'queue.connection'</span> =&gt; <span class="string">'registerQueueBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Queue\Factory'</span> =&gt; <span class="string">'registerQueueBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\Queue\Queue'</span> =&gt; <span class="string">'registerQueueBindings'</span>,</span><br><span class="line">    <span class="string">'redis'</span> =&gt; <span class="string">'registerRedisBindings'</span>,</span><br><span class="line">    <span class="string">'request'</span> =&gt; <span class="string">'registerRequestBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Http\Request'</span> =&gt; <span class="string">'registerRequestBindings'</span>,</span><br><span class="line">    <span class="string">'session'</span> =&gt; <span class="string">'registerSessionBindings'</span>,</span><br><span class="line">    <span class="string">'session.store'</span> =&gt; <span class="string">'registerSessionBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Session\SessionManager'</span> =&gt; <span class="string">'registerSessionBindings'</span>,</span><br><span class="line">    <span class="string">'translator'</span> =&gt; <span class="string">'registerTranslationBindings'</span>,</span><br><span class="line">    <span class="string">'url'</span> =&gt; <span class="string">'registerUrlGeneratorBindings'</span>,</span><br><span class="line">    <span class="string">'validator'</span> =&gt; <span class="string">'registerValidatorBindings'</span>,</span><br><span class="line">    <span class="string">'view'</span> =&gt; <span class="string">'registerViewBindings'</span>,</span><br><span class="line">    <span class="string">'Illuminate\Contracts\View\Factory'</span> =&gt; <span class="string">'registerViewBindings'</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<ol>
<li>通过看源码，我们发现有这么一个变量 <code>$availableBindings</code>, log最终是 <code>Monolog\Logger</code>类。如果看官不明白，可以参照上文中的<code>Facade</code>的原理链接，了解一下lumen的机制。</li>
</ol>
<h2 id="u96C6_u6210_u81EA_u5DF1_u7684Log_u7C7B"><a href="#u96C6_u6210_u81EA_u5DF1_u7684Log_u7C7B" class="headerlink" title="集成自己的Log类"></a>集成自己的Log类</h2><p>上文我们明白了Log既然是加载了 <code>Monolog\Logger</code> 类，那我们可以集成一个自己的Log类，最终代码如下<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * To change this license header, choose License Headers in Project Properties.</span><br><span class="line"> * To change this template file, choose Tools | Templates</span><br><span class="line"> * and open the template in the editor.</span><br><span class="line"> * default log directory is storage/api/</span><br><span class="line"> * default log name format is YYYY-mm-dd.log</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Sphenginx</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Monolog</span>\<span class="title">Logger</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Monolog</span>\<span class="title">Handler</span>\<span class="title">StreamHandler</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Monolog</span>\<span class="title">Formatter</span>\<span class="title">LineFormatter</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * user defined Log class, with StreamHandler and LineFormatter </span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@author</span> Sphenginx</span><br><span class="line"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Log</span> </span><br><span class="line"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//define static log instance.</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="variable">$_log_instance</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 获取log实例</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span> obj</span><br><span class="line">     * <span class="doctag">@author</span> Sphenginx</span><br><span class="line">     **/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getLogInstance</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">static</span>::<span class="variable">$_log_instance</span> === <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">static</span>::<span class="variable">$_log_instance</span> = <span class="keyword">new</span> Logger(<span class="string">'Sphenginx'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">static</span>::<span class="variable">$_log_instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Handle dynamic, static calls to the object.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span>  string  $method 可用方法: debug|info|notice|warning|error|critical|alert|emergency 可调用的方法详见 Monolog\Logger 类</span><br><span class="line">     * <span class="doctag">@param</span>  array   $args 调用参数</span><br><span class="line">     * <span class="doctag">@return</span> mixed</span><br><span class="line">     * <span class="doctag">@author</span> Sphenginx</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span><span class="params">(<span class="variable">$method</span>, <span class="variable">$args</span>)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="keyword">static</span>::getLogInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//组织参数信息</span></span><br><span class="line">        <span class="variable">$message</span> = <span class="variable">$args</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="variable">$context</span> = <span class="keyword">isset</span>(<span class="variable">$args</span>[<span class="number">1</span>]) ? <span class="variable">$args</span>[<span class="number">1</span>] : [];</span><br><span class="line">        <span class="variable">$path</span>    = <span class="keyword">isset</span>(<span class="variable">$args</span>[<span class="number">2</span>]) ? <span class="variable">$args</span>[<span class="number">2</span>] : <span class="string">'api/'</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置日志处理手柄，默认为写入文件（还有mail、console、db、redis等方式，详见Monolog\handler 目录）</span></span><br><span class="line">        <span class="variable">$handler</span> = <span class="keyword">new</span> StreamHandler(storage_path(<span class="variable">$path</span>) . date(<span class="string">'Y-m-d'</span>).<span class="string">'.log'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置输出格式LineFormatter(Monolog\Formatter\LineFormatter)， ignore context and extra</span></span><br><span class="line">        <span class="variable">$handler</span>-&gt;setFormatter(<span class="keyword">new</span> LineFormatter(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">true</span>, <span class="keyword">true</span>));</span><br><span class="line"></span><br><span class="line">        <span class="variable">$instance</span>-&gt;pushHandler(<span class="variable">$handler</span>);</span><br><span class="line">        <span class="variable">$instance</span>-&gt;<span class="variable">$method</span>(<span class="variable">$message</span>, <span class="variable">$context</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>说明下，<code>__callStatic</code>  方法是php5.3+以来 非常方便的一个魔术方法。</p>
<h2 id="More_Info"><a href="#More_Info" class="headerlink" title="More Info"></a>More Info</h2><ul>
<li><a href="http://laravelacademy.org/docs/lumen" target="_blank" rel="external">Lumen中文文档</a></li>
<li><a href="http://coolshell.cn/articles/9949.html" target="_blank" rel="external">IoC/DIP其实是一种管理思想</a></li>
</ul>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/17/architect/" itemprop="url">
                  我眼里的架构师
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-17T18:03:01+08:00" content="2015-12-17">
              2015-12-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/17/architect/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/17/architect/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p><img src="http://sphenginx.github.io/images/architect.png" alt="architect"></p>
<p>攻城狮，美其名曰架构师。相信每家公司对架构师的定义和要求都不一样，今天我仅以我的角度，聊一聊我眼里的架构狮。</p>
<p>几年前，我对架构师的印象，停留在：画漂亮的设计图，研究高性能，技术攻关一把手。反正就是各种技术高手的标签都可以贴上去。最近两三年，和自己做的事情、职责多少有一点点关系，思路发生了一些变化，总结下来，我觉得架构师的关注点应该是：  </p>
<ul>
<li>架构团队</li>
<li>架构技术</li>
<li>架构流程规范</li>
<li>架构产品</li>
<li>架构客户</li>
</ul>
<h2 id="u67B6_u6784_u56E2_u961F"><a href="#u67B6_u6784_u56E2_u961F" class="headerlink" title="架构团队"></a>架构团队</h2><p>没有团队，就没有架构师。</p>
<h3 id="u67B6_u6784_u5E08_u9700_u8981_u5173_u6CE8_u5E76_u4E0D_u65AD_u4F18_u5316_u56E2_u961F_u7684_u7ED3_u6784_u3002"><a href="#u67B6_u6784_u5E08_u9700_u8981_u5173_u6CE8_u5E76_u4E0D_u65AD_u4F18_u5316_u56E2_u961F_u7684_u7ED3_u6784_u3002" class="headerlink" title="架构师需要关注并不断优化团队的结构。"></a>架构师需要关注并不断优化团队的结构。</h3><p>一个20几个人的开发团队，架构师作为团队的主角，需要能最大化团队的效率：包括把什么样的人放到什么样的位置和哪些人做哪方面的对接；根据团队成员的特点如何做技术配比和责任分工，如何组织好团队协助自己完成技术攻关、技术研究和选型。</p>
<h3 id="u67B6_u6784_u5E08_u8FD8_u9700_u8981_u65F6_u523B_u5173_u6CE8_u56E2_u961F_u7684_u6210_u957F_u8DEF_u7EBF_u3002"><a href="#u67B6_u6784_u5E08_u8FD8_u9700_u8981_u65F6_u523B_u5173_u6CE8_u56E2_u961F_u7684_u6210_u957F_u8DEF_u7EBF_u3002" class="headerlink" title="架构师还需要时刻关注团队的成长路线。"></a>架构师还需要时刻关注团队的成长路线。</h3><p>对每个开发组的lead，帮助他们在最短的时间内达到他们的下一个技术制高点，同时帮助他们筛选出组里的后备军，在合适的时间，给后备军独立攻关亦或带小团队成长的机会。</p>
<h2 id="u67B6_u6784_u6280_u672F"><a href="#u67B6_u6784_u6280_u672F" class="headerlink" title="架构技术"></a>架构技术</h2><p>做为架构师的看家本领，架构师需要做到的当然是技术过硬、视野够广。至少在某一个领域有一技之长，同时不失对当前流行技术的了解、深入把控。主要体现在：</p>
<h3 id="u6280_u672F_u9009_u578B"><a href="#u6280_u672F_u9009_u578B" class="headerlink" title="技术选型"></a>技术选型</h3><p>选择合适的技术，本身就是仁者见仁、智者见智。但是，对架构师的挑战，在于你是否是在任何项目、任何产品上都坚持只用自己熟悉的技术。接触过很多“架构师”，坚持的认为熟悉的就是最棒的、不管黑猫白猫抓到耗子就是好猫。这是我坚决反对的观点。既然是架构师，技术上必然有一技之长，要么编程牛逼可以从应用层写到内核层，要么对数据有很强的分析能力，要么对分布式高性能有很多的研究和经验，要么是客户端架构师对iOS/Android 有深入的研究，但是，不管是哪一个领域的高手，都不应该也不能够丢失对新技术的嗅觉敏感度。好的架构师，一定是在“老的技术”的保障下，逐步的研究、采用、推广当前流行的新技术，然后在合适的时间，完成新老技术方案的升级。同时，还需要考虑产品的特点、团队的结构以及自己对选用技术的把控能力。</p>
<h3 id="u5E73_u53F0_u9009_u578B"><a href="#u5E73_u53F0_u9009_u578B" class="headerlink" title="平台选型"></a>平台选型</h3><p>我把平台选型拎出来，是因为最近两三年云的快速的发展和变革。做为“有追求的架构师”，你是坚持创造一切，还是拥抱云服务？我是一个云服务的坚决拥护者，道理很简单，让合适的团队做合适的事情，同时，对于中小规模的互联网产品线，利用远比创造成本更低。所以，我们自己的产品，能托管于云端的，坚决不自己构建。目前我们在用的云服务：阿里云托管所有的主机，阿里云RDS托管数据，阿里云OSS数据备份，阿里云ODPS大数据计算，七牛云文件存储和文件CDN，云片发SMS短信，Send Cloud发送邮件通知。</p>
<h3 id="u6301_u7EED_u4EA4_u4ED8"><a href="#u6301_u7EED_u4EA4_u4ED8" class="headerlink" title="持续交付"></a>持续交付</h3><p>再牛的架构师，如果不能带领团队把产品交付出来，即使拥有再牛逼的技术、技术选型和平台选型再高大上，也于事无补。架构师需要平衡好架构设计、产品的交付周期、技术方案的难易程度。</p>
<h3 id="u67B6_u6784_u5E08_u5931_u4E1A_u8BBA"><a href="#u67B6_u6784_u5E08_u5931_u4E1A_u8BBA" class="headerlink" title="架构师失业论"></a>架构师失业论</h3><p>今天和团队聊天的时候，提到了“架构师失业论”。我一直认为，当今技术和平台的变革，不出几年，架构师们都可以统统失业了。公司付给架构狮们高额的薪水，可以完全足够用来支付给云平台。未来，云将主导一切，托管一切。你看看AWS的Lambda，你看看现在活起来的Mesos，已经可以让开发者忘记内存、CPU、磁盘的存在了，随着访问量自动无限扩容。你说，还要你架构师有何用呢？</p>
<h2 id="u67B6_u6784_u89C4_u8303"><a href="#u67B6_u6784_u89C4_u8303" class="headerlink" title="架构规范"></a>架构规范</h2><p>规范在很大程度上绝对了开发团队的开发效率、开发团队和产品团队的沟通效率。在我看来，规范包括但不限于：</p>
<h3 id="u5F00_u53D1_u89C4_u8303"><a href="#u5F00_u53D1_u89C4_u8303" class="headerlink" title="开发规范"></a>开发规范</h3><p>包括代码的目录结构规范，编码规范，SCM管理规范，包管理和工具规范等等。</p>
<h3 id="u53D1_u5E03_u89C4_u8303"><a href="#u53D1_u5E03_u89C4_u8303" class="headerlink" title="发布规范"></a>发布规范</h3><p>又包括代码版本管理规范，开发环境、测试环境、Staging环境以及生产环境要求，上线发布的流程等等。</p>
<h3 id="u6C9F_u901A_u89C4_u8303"><a href="#u6C9F_u901A_u89C4_u8303" class="headerlink" title="沟通规范"></a>沟通规范</h3><p>包括团队沟通的工具、形式，代码review的方式方法等。</p>
<p>我们目前在使用Git，同时，遵循 git flow，代码review走merge request，CI集成gitlab CI &amp; docker runner/Jenkins。合理利用工具，可以是开发效率事半功倍。</p>
<h2 id="u67B6_u6784_u4EA7_u54C1"><a href="#u67B6_u6784_u4EA7_u54C1" class="headerlink" title="架构产品"></a>架构产品</h2><p>产品和架构师有什么关系？架构师除了对产品有100%的了解，还需要了解竞争对手的产品、功能，以及技术能力。同时，架构师做为产品团队和开发团队的沟通枢纽，需要协调好团队沟通、合作中出现的问题。当然第一的需要避免的发生的就是 “开发工程师拿刀砍了产品经理”！…</p>
<h2 id="u5199_u5728_u6700_u540E"><a href="#u5199_u5728_u6700_u540E" class="headerlink" title="写在最后"></a>写在最后</h2><p>也有人问我，架构师有什么优秀的品质。</p>
<p>第一，品质是人特有的特性，所以，好的品质并不需要区分架构师和非架构师。所以，那些你知道的优秀品质，对架构师统统适用。</p>
<p>第二，我怎么知道，我又不是架构师……</p>
<p>转自<a href="http://mp.weixin.qq.com/s?__biz=MzI4MjA4ODU0Ng==&amp;mid=401373742&amp;idx=1&amp;sn=e27102eda726a2a56ee097013c2754ac" target="_blank" rel="external">大房说眼里的架构师</a>.</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/07/markdown/" itemprop="url">
                  Markdown学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-07T17:03:01+08:00" content="2015-12-07">
              2015-12-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/07/markdown/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/07/markdown/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="Markdown_u6982_u8FF0"><a href="#Markdown_u6982_u8FF0" class="headerlink" title="Markdown概述"></a>Markdown概述</h2><h3 id="u5B97_u65E8"><a href="#u5B97_u65E8" class="headerlink" title="宗旨"></a>宗旨</h3><p>Markdown 是一种轻量级标记语言，创始人为约翰·格鲁伯（John Gruber）。它允许人们 <code>使用易读易写的纯文本格式编写文档，然后转换成有效的XHTML(或者HTML)文档</code>。</p>
<p>可读性，无论如何，都是最重要的。一份使用 Markdown 格式撰写的文件应该可以直接以纯文本发布，并且看起来不会像是由许多标签或是格式指令所构成。Markdown 语法受到一些既有 text-to-HTML 格式的影响，包括 <em>Setext</em>、<em>atx</em>、<em>Textile</em>、<em>reStructuredText</em>、<em>Grutatext</em> 和 <em>EtText</em>，而最大灵感来源其实是纯文本电子邮件的格式。</p>
<p>总之， Markdown 的语法全由一些符号所组成，这些符号经过精挑细选，其作用一目了然。比如：在文字两旁加上星号，看起来就像<em>强调</em>。Markdown 的列表看起来，嗯，就是列表。Markdown 的区块引用看起来就真的像是引用一段文字，就像你曾在电子邮件中见过的那样。</p>
<h3 id="u517C_u5BB9HTML"><a href="#u517C_u5BB9HTML" class="headerlink" title="兼容HTML"></a>兼容HTML</h3><p>Markdown 语法的目标是：成为一种适用于网络的书写语言。</p>
<p>Markdown 不是想要取代 HTML，甚至也没有要和它相近，它的语法种类很少，只对应 HTML 标记的一小部分。Markdown 的构想不是要使得 HTML 文档更容易书写。在我看来， HTML 已经很容易写了。Markdown 的理念是，能让文档更容易读、写和随意改。HTML 是一种发布的格式，Markdown 是一种书写的格式。就这样，Markdown 的格式语法只涵盖纯文本可以涵盖的范围。</p>
<p>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。不需要额外标注这是 HTML 或是 Markdown；只要直接加标签就可以了。</p>
<p>要制约的只有一些 HTML 区块元素――比如 <code>&lt;div&gt;</code>、<code>&lt;table&gt;</code>、<code>&lt;pre&gt;</code>、<code>&lt;p&gt;</code> 等标签，必须在前后加上空行与其它内容区隔开，还要求它们的开始标签与结尾标签不能用制表符或空格来缩进。Markdown 的生成器有足够智能，不会在 HTML 区块标签外加上不必要的 <code>&lt;p&gt;</code> 标签。</p>
<p>例子如下，在 Markdown 文件里加上一段 HTML 表格：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">这是一个普通段落。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">td</span>&gt;</span>Foo<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">这是另一个普通段落。</span><br></pre></td></tr></table></figure></p>
<p>请注意，在 HTML 区块标签间的 Markdown 格式语法将不会被处理。比如，你在 HTML 区块内使用 Markdown 样式的<em>强调</em>会没有效果。</p>
<p>HTML 的区段（行内）标签如 <code>&lt;span&gt;</code>、<code>&lt;cite&gt;</code>、<code>&lt;del&gt;</code> 可以在 Markdown 的段落、列表或是标题里随意使用。依照个人习惯，甚至可以不用 Markdown 格式，而直接采用 HTML 标签来格式化。举例说明：如果比较喜欢 HTML 的 <code>&lt;a&gt;</code> 或 <code>&lt;img&gt;</code> 标签，可以直接使用这些标签，而不用 Markdown 提供的链接或是图像标签语法。</p>
<p>和处在 HTML 区块标签间不同，Markdown 语法在 HTML 区段标签间是有效的。</p>
<h2 id="Markdown_u57FA_u672C_u8BED_u6CD5"><a href="#Markdown_u57FA_u672C_u8BED_u6CD5" class="headerlink" title="Markdown基本语法"></a>Markdown基本语法</h2><h3 id="u4EE3_u7801_u533A_u57DF"><a href="#u4EE3_u7801_u533A_u57DF" class="headerlink" title="代码区域"></a>代码区域</h3><p>如果你只想高亮语句中的某个函数名或关键字，可以使用 <font color="red">`function_name()`</font>  实现</p>
<p>通常编辑器根据代码片段适配合适的高亮方法，但你也可以用 ``` 包裹一段代码，并指定一种语言</p>
<p>支持的语言：<code>actionscript</code>, <code>apache</code>, <code>bash</code>, <code>clojure</code>, <code>cmake</code>, <code>coffeescript</code>, <code>cpp</code>, <code>cs</code>, <code>css</code>, <code>d</code>, <code>delphi</code>, <code>django</code>, <code>erlang</code>, <code>go</code>, <code>haskell</code>, <code>html</code>, <code>http</code>, <code>ini</code>, <code>java</code>, <code>javascript</code>, <code>json</code>, <code>lisp</code>, <code>lua</code>, <code>matlab</code>, <code>nginx</code>, <code>objectivec</code>, <code>perl</code>, <code>php</code>, <code>python</code>, <code>r</code>, <code>ruby</code>, <code>scala</code>, <code>smalltalk</code>, <code>sql</code>, <code>tex</code>, <code>vbscript</code>, <code>xml</code></p>
<pre><code>
	&#96`` javascript
	$(document).ready(function () {
	    alert('hello world');
	});
	&#96``
	
</code></pre><p><a href="https://github.com/hexojs/hexo/issues/1636" target="_blank" rel="external">谢谢hexo漩涡的帮助</a>!<br><a href="https://github.com/hexojs/site/blame/master/source/docs/tag-plugins.md#L135-L139" target="_blank" rel="external">详见hexo tag plugins</a></p>
<p>也可以使用 4 空格缩进，再贴上代码，实现相同的的效果</p>
<pre>
    def g(x):
        yield from range(x, 0, -1)
    yield from range(x)
</pre>

<h3 id="u6807_u9898"><a href="#u6807_u9898" class="headerlink" title="标题"></a>标题</h3><p>Markdown提供了两种方式（Setext和Atx）来显示标题。<br>例:<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Setext方式</span><br><span class="line"><span class="header">标题1</span><br><span class="line">=================</span></span><br><span class="line"><span class="header">标题2</span><br><span class="line">-----------------</span></span><br><span class="line"></span><br><span class="line">Atx方式</span><br><span class="line"># 标题1</span><br><span class="line">## 标题2</span><br><span class="line">###### 标题6</span><br></pre></td></tr></table></figure></p>
<h3 id="u6362_u884C"><a href="#u6362_u884C" class="headerlink" title="换行"></a>换行</h3><p>在文字的末尾使用两个或两个以上的空格来表示换行。</p>
<h3 id="u5F15_u7528"><a href="#u5F15_u7528" class="headerlink" title="引用"></a>引用</h3><p>行首使用<code>[大于号+空格]</code>表示引用段落，内部可以嵌套多个引用。</p>
<p>语法：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="blockquote">&gt; 这是一个引用，</span></span><br><span class="line"><span class="blockquote">&gt; 这里木有换行，</span></span><br><span class="line"><span class="blockquote">&gt; 在这里换行了。</span></span><br><span class="line"><span class="blockquote">&gt; &gt; 内部嵌套</span></span><br></pre></td></tr></table></figure></p>
<p>效果：</p>
<blockquote>
<p>这是一个引用，<br>这里木有换行，<br>在这里换行了。</p>
<blockquote>
<p>内部嵌套</p>
</blockquote>
</blockquote>
<h3 id="u5217_u8868"><a href="#u5217_u8868" class="headerlink" title="列表"></a>列表</h3><ul>
<li>无序列表使用 *、 + 或 - 后面加上空格来表示。</li>
</ul>
<p>语法：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* <span class="keyword">Item </span><span class="number">1</span></span><br><span class="line">* <span class="keyword">Item </span><span class="number">2</span></span><br><span class="line">* <span class="keyword">Item </span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">+ <span class="keyword">Item </span><span class="number">1</span></span><br><span class="line">+ <span class="keyword">Item </span><span class="number">2</span></span><br><span class="line">+ <span class="keyword">Item </span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">- <span class="keyword">Item </span><span class="number">1</span></span><br><span class="line">- <span class="keyword">Item </span><span class="number">2</span></span><br><span class="line">- <span class="keyword">Item </span><span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<p>效果：</p>
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
</ul>
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
</ul>
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li><p>Item 3</p>
</li>
<li><p>有序列表使用数字加英文句号加空格表示。<br>语法：  </p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 列表前使用 [数字+空格]</span><br><span class="line"><span class="number">2.</span> 我们会自动帮你添加数字</span><br><span class="line"><span class="number">7.</span> 不用担心数字不对，显示的时候我们会自动把这行的 <span class="number">7</span> 纠正为 <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>效果：  </p>
<ol>
<li>列表前使用 [数字+空格]</li>
<li>我们会自动帮你添加数字</li>
<li>不用担心数字不对，显示的时候我们会自动把这行的 7 纠正为 3</li>
</ol>
<h3 id="u5F3A_u8C03"><a href="#u5F3A_u8C03" class="headerlink" title="强调"></a>强调</h3><p>Markdown使用 * 或 _ 表示强调。</p>
<p>语法：<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">单星号 = <span class="keyword">*</span>斜体<span class="keyword">*</span></span><br><span class="line">单下划线 = _斜体_</span><br><span class="line">双星号 = <span class="keyword">*</span><span class="keyword">*</span>加粗<span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">双下划线 = __加粗__</span><br><span class="line">删除线 = ~~加粗~~</span><br></pre></td></tr></table></figure></p>
<p>效果：<br>单星号 = <em>斜体</em><br>单下划线 = <em>斜体</em><br>双星号 = <strong>加粗</strong><br>双下划线 = <strong>加粗</strong><br>删除线 = <del>加粗</del></p>
<h3 id="u8868_u683C"><a href="#u8868_u683C" class="headerlink" title="表格"></a>表格</h3><p>语法：<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> Tables        </span>|<span class="string"> Are           </span>|<span class="string"> Cool  </span>|</span><br><span class="line">|<span class="string"> ------------- </span>|<span class="string">:-------------:</span>|<span class="string"> -----:</span>|</span><br><span class="line">|<span class="string"> col 3 is      </span>|<span class="string"> right-aligned </span>|<span class="string"> $1600 </span>|</span><br><span class="line">|<span class="string"> col 2 is      </span>|<span class="string"> centered      </span>|<span class="string">   $12 </span>|</span><br><span class="line">|<span class="string"> zebra stripes </span>|<span class="string"> are neat      </span>|<span class="string">    $1 </span>|</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">dog |<span class="string"> bird </span>|<span class="string"> cat</span><br><span class="line">----</span>|<span class="string">------</span>|<span class="string">----</span><br><span class="line">foo </span>|<span class="string"> foo  </span>|<span class="string"> foo</span><br><span class="line">bar </span>|<span class="string"> bar  </span>|<span class="string"> bar</span><br><span class="line">baz </span>|<span class="string"> baz  </span>|<span class="string"> baz</span></span><br></pre></td></tr></table></figure></p>
<p>效果：  </p>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Are</th>
<th style="text-align:right">Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td style="text-align:center">right-aligned</td>
<td style="text-align:right">$1600</td>
</tr>
<tr>
<td>col 2 is</td>
<td style="text-align:center">centered</td>
<td style="text-align:right">$12</td>
</tr>
<tr>
<td>zebra stripes</td>
<td style="text-align:center">are neat</td>
<td style="text-align:right">$1</td>
</tr>
</tbody>
</table>
<p>或</p>
<table>
<thead>
<tr>
<th>dog</th>
<th>bird</th>
<th>cat</th>
</tr>
</thead>
<tbody>
<tr>
<td>foo</td>
<td>foo</td>
<td>foo</td>
</tr>
<tr>
<td>bar</td>
<td>bar</td>
<td>bar</td>
</tr>
<tr>
<td>baz</td>
<td>baz</td>
<td>baz</td>
</tr>
</tbody>
</table>
<h3 id="u94FE_u63A5"><a href="#u94FE_u63A5" class="headerlink" title="链接"></a>链接</h3><p>Markdown支持两种风格的链接：<code>Inline</code> 和 <code>Reference</code> 。</p>
<p>Inline ：以中括号标记显示的链接文本，后面紧跟用小括号包围的链接。如果链接有title属性，则在链接中使用空格加”title属性”。<br>Reference ：一般应用于多个不同位置使用相同链接。通常分为两个部分，调用部分为<a href="http://sphenginx.github.io" title="可选的title">链接文本</a>；定义部分可以出现在文本中的其他位置，格式为 <a href="http://sphenginx.github.io" title="可选的title">ref</a>: <a href="http://some/link/address" target="_blank" rel="external">http://some/link/address</a> (可选的标题)。<br>注：ref中不区分大小写。<br>语法：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是一个Inline[<span class="link_label">示例</span>](<span class="link_url">http://sphenginx.github.io "可选的title"</span>)。</span><br><span class="line">这是一个Reference[<span class="link_label">示例</span>][<span class="link_reference">ref</span>]。</span><br><span class="line">[<span class="link_reference">ref</span>]:<span class="link_url">http://sphenginx.github.io (可选的title)</span></span><br></pre></td></tr></table></figure></p>
<p>效果：<br>这是一个Inline<a href="http://sphenginx.github.io" title="可选的title">示例</a>。<br>这是一个Reference<a href="http://sphenginx.github.io" title="可选的title">示例</a>。  </p>
<h3 id="u56FE_u7247"><a href="#u56FE_u7247" class="headerlink" title="图片"></a>图片</h3><p>图片的使用方法基本上和链接类似，只是在中括号前加叹号。</p>
<p>语法:<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">![<span class="link_label">图片名称</span>](<span class="link_url">http://图片网址</span>)</span><br><span class="line">![<span class="link_label">GitHub头像</span>](<span class="link_url">https://avatars1.githubusercontent.com/u/1829395?v=3&amp;s=460</span>)</span><br></pre></td></tr></table></figure></p>
<p>效果:  </p>
<p><img src="https://avatars1.githubusercontent.com/u/1829395?v=3&amp;s=460" alt="GitHub头像"></p>
<p>注：Markdown不能设置图片大小，如果必须设置则应使用HTML标记 <code>&lt;img&gt;</code>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="tag">img</span> src=<span class="string">"https://avatars1.githubusercontent.com/u/1829395?v=3&amp;s=460"</span> <span class="attribute">width</span>=<span class="string">"400"</span> <span class="attribute">height</span>=<span class="string">"100"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="https://avatars1.githubusercontent.com/u/1829395?v=3&s=460" width="400" height="100"></p>
<h3 id="u5206_u9694_u7EBF"><a href="#u5206_u9694_u7EBF" class="headerlink" title="分隔线"></a>分隔线</h3><p>在一行中使用三个或三个以上的*、-或_可以添加分隔线，其中可以有空白，但是不能有其他字符。</p>
<p>语法：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
<p>效果：</p>
<hr>
<h3 id="u8F6C_u4E49_u5B57_u7B26"><a href="#u8F6C_u4E49_u5B57_u7B26" class="headerlink" title="转义字符"></a>转义字符</h3><p>Markdown中的转义字符为\，可以转义的有：<br><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="command">\\</span> 反斜杠</span><br><span class="line"><span class="command">\`</span> 反引号</span><br><span class="line"><span class="command">\*</span> 星号</span><br><span class="line"><span class="command">\_</span> 下划线</span><br><span class="line"><span class="command">\&#123;</span><span class="command">\&#125;</span> 大括号</span><br><span class="line"><span class="command">\[</span><span class="command">\]</span> 中括号</span><br><span class="line"><span class="command">\(</span><span class="command">\)</span> 小括号</span><br><span class="line"><span class="command">\#</span> 井号</span><br><span class="line"><span class="command">\+</span> 加号</span><br><span class="line"><span class="command">\-</span> 减号</span><br><span class="line"><span class="command">\.</span> 英文句号</span><br><span class="line"><span class="command">\!</span> 感叹号</span><br></pre></td></tr></table></figure></p>
<h3 id="u989C_u8272_u4E0E_u5B57_u4F53"><a href="#u989C_u8272_u4E0E_u5B57_u4F53" class="headerlink" title="颜色与字体"></a>颜色与字体</h3><p>markdown 不支持颜色和字体，所以如果想添加颜色或字体，只能使用 html 标签来实现这些需求了。</p>
<p>语法:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="attribute">font</span> <span class="attribute">color</span>=<span class="string">"red"</span>&gt;我是红色的&lt;/<span class="attribute">font</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>效果:  </p>
<font color="red">我是红色的</font>

<h2 id="u9AD8_u7EA7_u6280_u5DE7"><a href="#u9AD8_u7EA7_u6280_u5DE7" class="headerlink" title="高级技巧"></a>高级技巧</h2><h3 id="u5236_u4F5C_u4E00_u4EFD_u5F85_u529E_u4E8B_u5B9C_Todo__u5217_u8868"><a href="#u5236_u4F5C_u4E00_u4EFD_u5F85_u529E_u4E8B_u5B9C_Todo__u5217_u8868" class="headerlink" title="制作一份待办事宜 Todo 列表"></a>制作一份待办事宜 Todo 列表</h3><p>语法：  </p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> [ ] 支持以 <span class="constant">PDF</span> 格式导出文稿</span><br><span class="line"></span>-<span class="ruby"> [ ] 改进 <span class="constant">Cmd</span> 渲染算法，使用局部渲染技术提高渲染效率</span><br><span class="line"></span>-<span class="ruby"> [x] 新增 <span class="constant">Todo</span> 列表功能</span><br><span class="line"></span>-<span class="ruby"> [x] 修复 <span class="constant">LaTex</span> 公式渲染问题</span><br><span class="line"></span>-<span class="ruby"> [x] 新增 <span class="constant">LaTex</span> 公式编号功能</span></span><br></pre></td></tr></table></figure>
<p>效果：</p>
<ul>
<li>[ ] 支持以 PDF 格式导出文稿</li>
<li>[ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li>
<li>[x] 新增 Todo 列表功能</li>
<li>[x] 修复 LaTex 公式渲染问题</li>
<li>[x] 新增 LaTex 公式编号功能</li>
</ul>
<h3 id="u9AD8_u6548_u7ED8_u5236_u6D41_u7A0B_u56FE_7C_u5E8F_u5217_u56FE"><a href="#u9AD8_u6548_u7ED8_u5236_u6D41_u7A0B_u56FE_7C_u5E8F_u5217_u56FE" class="headerlink" title="高效绘制流程图|序列图"></a>高效绘制流程图|序列图</h3><p>不知道为啥Git pages 不支持这种写法，可以copy在最新的Markdown语法解析器里面试试，或者点击 <a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="external">Markdown在线编辑器</a> 尝试</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: <span class="type">Start</span></span><br><span class="line"><span class="keyword">op</span>=&gt;operation: <span class="type">Your</span> <span class="type">Operation</span></span><br><span class="line">cond=&gt;condition: <span class="type">Yes</span> or <span class="type">No</span>?</span><br><span class="line">e=&gt;<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">st-&gt;<span class="keyword">op</span>-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;<span class="keyword">op</span></span><br></pre></td></tr></table></figure>
<h3 id="u884C_u5185_HTML__u5143_u7D20"><a href="#u884C_u5185_HTML__u5143_u7D20" class="headerlink" title="行内 HTML 元素"></a>行内 HTML 元素</h3><p>目前只支持部分段内 HTML 元素效果，包括 <code>&lt;kdb&gt;</code> <code>&lt;b&gt;</code> <code>&lt;i&gt;</code> <code>&lt;em&gt;</code> <code>&lt;sup&gt;</code> <code>&lt;sub&gt;</code> <code>&lt;br&gt;</code> ，如</p>
<ul>
<li>键位显示<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用 <span class="tag">&lt;<span class="title">kbd</span>&gt;</span>Ctrl<span class="tag">&lt;<span class="title">kbd</span>&gt;</span>+<span class="tag">&lt;<span class="title">kbd</span>&gt;</span>Alt<span class="tag">&lt;<span class="title">kbd</span>&gt;</span>+<span class="tag">&lt;<span class="title">kbd</span>&gt;</span>Del<span class="tag">&lt;<span class="title">kbd</span>&gt;</span> 重启电脑</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>效果:<br>使用  <kbd>Ctrl<kbd>+<kbd>Alt<kbd>+<kbd>Del<kbd>  重启电脑</kbd></kbd></kbd></kbd></kbd></kbd></p>
<ul>
<li><p>代码块</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用 <span class="tag">&lt;<span class="title">pre</span>&gt;</span><span class="tag">&lt;/<span class="title">pre</span>&gt;</span> 元素同样可以形成代码块</span><br></pre></td></tr></table></figure>
</li>
<li><p>粗斜体</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;b&gt;</span> Markdown 在此处同样适用，如 <span class="keyword">*</span>加粗<span class="keyword">*</span> <span class="variable">&lt;/b&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="u6269_u5C55"><a href="#u6269_u5C55" class="headerlink" title="扩展"></a>扩展</h3><p>支持 jsfiddle、gist、runjs、优酷视频，直接填写 url，在其之后会自动添加预览点击会展开相关内容。<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="link_url">http://&#123;url_of_the_fiddle&#125;/embedded/</span>[<span class="link_label">&#123;tabs&#125;/[&#123;style&#125;</span>]]/</span><br><span class="line">https://gist.github.com/&#123;gist<span class="emphasis">_id&#125;</span><br><span class="line">http://runjs.cn/detail/&#123;id&#125;</span><br><span class="line">http://v.youku.com/v_</span>show/id<span class="emphasis">_&#123;video_</span>id&#125;.html</span><br></pre></td></tr></table></figure></p>
<h3 id="u516C_u5F0F"><a href="#u516C_u5F0F" class="headerlink" title="公式"></a>公式</h3><p>当你需要在编辑器中插入数学公式时，可以使用两个美元符 $$ 包裹 TeX 或 LaTeX 格式的数学公式来实现。提交后，问答和文章页会根据需要加载 Mathjax 对数学公式进行渲染。如：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$$ x = &#123;-b \pm \<span class="built_in">sqrt</span>&#123;b^<span class="number">2</span>-<span class="number">4</span>ac&#125; \over <span class="number">2</span>a&#125;. $$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">x \href&#123;why-equal.html&#125;&#123;=&#125; y^<span class="number">2</span> + <span class="number">1</span></span><br><span class="line">$$</span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br>$$ x = {-b \pm \sqrt{b^2-4ac} \over 2a}. $$</p>
<p>$$<br>x \href{why-equal.html}{=} y^2 + 1<br>$$</p>
<h2 id="Markdown_u7F16_u8F91_u5668"><a href="#Markdown_u7F16_u8F91_u5668" class="headerlink" title="Markdown编辑器"></a>Markdown编辑器</h2><ul>
<li><a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="external">欢迎使用 Cmd Markdown 编辑阅读器</a></li>
</ul>
<p>Win平台</p>
<ul>
<li><a href="http://markdownpad.com/" target="_blank" rel="external">MarkdownPad</a></li>
<li><a href="http://pad.haroopress.com/" target="_blank" rel="external">Haroopad - The next document processor</a><br>进入首页之后，点击用户进入下载界面</li>
</ul>
<p>Linux平台</p>
<ul>
<li><a href="http://sourceforge.net/p/retext/home/ReText/" target="_blank" rel="external">ReText</a></li>
</ul>
<p>Mac平台</p>
<ul>
<li><a href="http://mouapp.com/" target="_blank" rel="external">Mou</a></li>
</ul>
<h2 id="u7ED3_u8BED"><a href="#u7ED3_u8BED" class="headerlink" title="结语"></a>结语</h2><p>以上几种格式是比较常用的格式，所以我们针对这些语法做了比较详细的说明。除这些之外，Markdown 还有其他语法，如想了解和学习更多，可以参考这篇<a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">『Markdown 语法说明』</a>。:smile: (It seems the hexo does not support emoji)…… </p>
<h2 id="u9644"><a href="#u9644" class="headerlink" title="附"></a>附</h2><ul>
<li><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="external">Github markdown guide</a></li>
<li><a href="http://www.emoji-cheat-sheet.com/" target="_blank" rel="external">emoji-cheat-sheet</a></li>
</ul>
<p>强烈建议您现在就立马用 Markdown 写一篇文章吧，体会一下 Markdown 的优雅之处！</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/01/php-new-features/" itemprop="url">
                  PHP5.3、5.4、5.5、5.6新特性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-01T20:03:01+08:00" content="2015-12-01">
              2015-12-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/01/php-new-features/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/01/php-new-features/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u8BF4_u660E"><a href="#u8BF4_u660E" class="headerlink" title="说明"></a>说明</h2><p>最近公司要用lumen框架开发应用APP的接口，用到了PHP新版本，一些新特性必须要了解，且有些可以在开发时就使用，如果不使用，那么何必升级PHP版本呢，显得有些得不偿失了！<br>所以整理了一下 一些特性，有可能不全，待添加。</p>
<h2 id="PHP5-3_new_feature"><a href="#PHP5-3_new_feature" class="headerlink" title="PHP5.3 new feature"></a>PHP5.3 new feature</h2><h3 id="u652F_u6301_u547D_u540D_u7A7A_u95F4__uFF08Namespace_uFF09"><a href="#u652F_u6301_u547D_u540D_u7A7A_u95F4__uFF08Namespace_uFF09" class="headerlink" title="支持命名空间 （Namespace）"></a>支持命名空间 （Namespace）</h3><p>毫无疑问，命名空间是PHP5.3所带来的最重要的新特性。<code>在PHP5.3中，则只需要指定不同的命名空间即可，命名空间的分隔符为反斜杆\。</code><br>Demo:<br>在select.php 中定义命名空间<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Zend</span>\<span class="title">Db</span>\<span class="title">Table</span>;    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Select</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样即使其它命名空间下存在名为Select的类，程序在调用时也不会产生冲突。代码的可读性也有所增加。<br>调用方法<br>call.php<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="comment">//namespace Zend\Db;    </span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">'select.php'</span>);    </span><br><span class="line"><span class="variable">$s</span> = <span class="keyword">new</span> Zend\Db\Table\Select();</span><br><span class="line"><span class="variable">$s</span>-&gt;test();</span><br></pre></td></tr></table></figure></p>
<h3 id="u652F_u6301_u5EF6_u8FDF_u9759_u6001_u7ED1_u5B9A_uFF08Late_Static_Binding_uFF09"><a href="#u652F_u6301_u5EF6_u8FDF_u9759_u6001_u7ED1_u5B9A_uFF08Late_Static_Binding_uFF09" class="headerlink" title="支持延迟静态绑定（Late Static Binding）"></a>支持延迟静态绑定（Late Static Binding）</h3><p>在PHP5中，我们可以在类中通过self关键字或者<strong>CLASS</strong>来判断或调用当前类。但有一个问题，如果我们是在子类中调用，得到的结果将是父类。因为在继承父类的时候，静态成员就已经被绑定了。 例如：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">self</span>::who();    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line">B::test();</span><br></pre></td></tr></table></figure></p>
<p>以上代码输出的结果是：<br>A </p>
<p>这和我们的预期不同，我们原来想得到子类的相应结果。<br><code>PHP 5.3.0中增加了一个static关键字来引用当前类，即实现了延迟静态绑定：</code><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">static</span>::who(); <span class="comment">// 这里实现了延迟的静态绑定    </span></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line">    </span><br><span class="line">B::test();</span><br></pre></td></tr></table></figure></p>
<p>以上代码输出的结果是：<br>B </p>
<h3 id="u652F_u6301goto_u8BED_u53E5"><a href="#u652F_u6301goto_u8BED_u53E5" class="headerlink" title="支持goto语句"></a>支持goto语句</h3><p>多数计算机程序设计语言中都支持无条件转向语句goto，当程序执行到goto语句时，即转向由goto语句中的标号指出的程序位置继续执行。尽管goto语句有可能会导致程序流程不清晰，可读性减弱，但在某些情况下具有其独特的方便之处，例如中断深度嵌套的循环和 if 语句。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="keyword">goto</span> a;    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Foo'</span>;    </span><br><span class="line">a:    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Bar'</span>;    </span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>,<span class="variable">$j</span>=<span class="number">50</span>; <span class="variable">$i</span>&lt;<span class="number">100</span>; <span class="variable">$i</span>++) &#123;    </span><br><span class="line">  <span class="keyword">while</span>(<span class="variable">$j</span>--) &#123;    </span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$j</span>==<span class="number">17</span>) <span class="keyword">goto</span> end;    </span><br><span class="line">  &#125;     </span><br><span class="line">&#125;    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">"i = $i"</span>;    </span><br><span class="line">end:    </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'j hit 17'</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="u652F_u6301_u95ED_u5305_u3001Lambda/Anonymous_u51FD_u6570"><a href="#u652F_u6301_u95ED_u5305_u3001Lambda/Anonymous_u51FD_u6570" class="headerlink" title="支持闭包、Lambda/Anonymous函数"></a>支持闭包、Lambda/Anonymous函数</h3><p>闭包（Closure）函数和Lambda函数的概念来自于函数编程领域。例如JavaScript 是支持闭包和 lambda 函数的最常见语言之一。<br>在PHP中，我们也可以通过create_function()在代码运行时创建函数。但有一个问题：创建的函数仅在运行时才被编译，而不与其它代码同时被编译成执行码，因此我们无法使用类似APC这样的执行码缓存来提高代码执行效率。<br>在PHP5.3中，我们可以使用Lambda/匿名函数来定义一些临时使用（即用即弃型）的函数，以作为array_map()/array_walk()等函数的回调函数。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="keyword">echo</span> preg_replace_callback(<span class="string">'~-([a-z])~'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(<span class="variable">$match</span>)</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> strtoupper(<span class="variable">$match</span>[<span class="number">1</span>]);    </span><br><span class="line">&#125;, <span class="string">'hello-world'</span>);    </span><br><span class="line"><span class="comment">// 输出 helloWorld    </span></span><br><span class="line"><span class="variable">$greet</span> = <span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$name</span>)</span>    </span><br><span class="line"></span>&#123;    </span><br><span class="line">    printf(<span class="string">"Hello %s\r\n"</span>, <span class="variable">$name</span>);    </span><br><span class="line">&#125;;    </span><br><span class="line"><span class="variable">$greet</span>(<span class="string">'World'</span>);    </span><br><span class="line"><span class="variable">$greet</span>(<span class="string">'PHP'</span>);    </span><br><span class="line"><span class="comment">//...在某个类中    </span></span><br><span class="line"><span class="variable">$callback</span> =      <span class="function"><span class="keyword">function</span> <span class="params">(<span class="variable">$quantity</span>, <span class="variable">$product</span>)</span> <span class="title">use</span> <span class="params">(<span class="variable">$tax</span>, &amp;<span class="variable">$total</span>)</span>         </span>&#123;    </span><br><span class="line">   <span class="variable">$pricePerItem</span> = constant(<span class="keyword">__CLASS__</span> . <span class="string">"::PRICE_"</span> .  strtoupper(<span class="variable">$product</span>));    </span><br><span class="line">   <span class="variable">$total</span> += (<span class="variable">$pricePerItem</span> * <span class="variable">$quantity</span>) * (<span class="variable">$tax</span> + <span class="number">1.0</span>);    </span><br><span class="line"> &#125;;    </span><br><span class="line">array_walk(<span class="variable">$products</span>, <span class="variable">$callback</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="u65B0_u589E_u4E24_u4E2A_u9B54_u672F_u65B9_u6CD5__callStatic_28_29_u548C__invoke_28_29"><a href="#u65B0_u589E_u4E24_u4E2A_u9B54_u672F_u65B9_u6CD5__callStatic_28_29_u548C__invoke_28_29" class="headerlink" title="新增两个魔术方法<code>__callStatic()</code>和<code>__invoke()</code>"></a>新增两个魔术方法<code>__callStatic()</code>和<code>__invoke()</code></h3><p>PHP中原本有一个魔术方法<code>__call()</code>，当代码调用对象的某个不存在的方法时该魔术方法会被自动调用。新增的<code>__callStatic()</code>方法则只用于静态类方法。当尝试调用类中不存在的静态方法时，<code>__callStatic()</code>魔术方法将被自动调用。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MethodTest</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span><span class="params">(<span class="variable">$name</span>, <span class="variable">$arguments</span>)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"调用对象方法 '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">' -- '</span>, <span class="variable">$arguments</span>). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">/**  PHP 5.3.0 以上版本中本类方法有效  */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span><span class="params">(<span class="variable">$name</span>, <span class="variable">$arguments</span>)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"调用静态方法 '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">' -- '</span>, <span class="variable">$arguments</span>). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line">  </span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">new</span> MethodTest;    </span><br><span class="line"><span class="variable">$obj</span>-&gt;runTest(<span class="string">'通过对象调用'</span>);    </span><br><span class="line">MethodTest::runTest(<span class="string">'静态调用'</span>);  <span class="comment">// As of PHP 5.3.0</span></span><br></pre></td></tr></table></figure></p>
<p>以上代码执行后输出如下：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">调用对象方法<span class="string">'runTest'</span> –- 通过对象调用</span><br><span class="line">调用静态方法<span class="string">'runTest'</span> –- 静态调用</span><br></pre></td></tr></table></figure></p>
<p>以函数形式来调用对象时，<code>__invoke()</code>方法将被自动调用。 </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MethodTest</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span><span class="params">(<span class="variable">$name</span>, <span class="variable">$arguments</span>)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Calling object method '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">', '</span>, <span class="variable">$arguments</span>). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**  PHP 5.3.0 以上版本中本类方法有效  */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span><span class="params">(<span class="variable">$name</span>, <span class="variable">$arguments</span>)</span> </span>&#123;    </span><br><span class="line">        <span class="comment">// 参数 $name 大小写敏感    </span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Calling static method '$name' "</span>    </span><br><span class="line">             . implode(<span class="string">', '</span>, <span class="variable">$arguments</span>). <span class="string">"\n"</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">new</span> MethodTest;    </span><br><span class="line"><span class="variable">$obj</span>-&gt;runTest(<span class="string">'in object context'</span>);    </span><br><span class="line">MethodTest::runTest(<span class="string">'in static context'</span>);  <span class="comment">// As of PHP 5.3.0</span></span><br></pre></td></tr></table></figure>
<h3 id="u4E09_u5143_u8FD0_u7B97_u7B26_u589E_u52A0_u4E86_u4E00_u4E2A_u5FEB_u6377_u4E66_u5199_u65B9_u5F0F"><a href="#u4E09_u5143_u8FD0_u7B97_u7B26_u589E_u52A0_u4E86_u4E00_u4E2A_u5FEB_u6377_u4E66_u5199_u65B9_u5F0F" class="headerlink" title="三元运算符增加了一个快捷书写方式"></a>三元运算符增加了一个快捷书写方式</h3><p>原本格式为是(expr1) ? (expr2) : (expr3)<br>如果expr1结果为True，则返回expr2的结果。<br>PHP5.3新增一种书写方式，可以省略中间部分，书写为expr1 ?: expr3<br>如果expr1结果为True,则返回expr1的结果<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原格式  </span></span><br><span class="line"><span class="variable">$expr</span> = <span class="variable">$expr1</span> ? <span class="variable">$expr1</span>  :<span class="variable">$expr2</span>  </span><br><span class="line"><span class="comment">//新格式  </span></span><br><span class="line"><span class="variable">$expr</span> = <span class="variable">$expr1</span> ? : <span class="variable">$expr2</span></span><br></pre></td></tr></table></figure></p>
<h3 id="PHP5-3_u4E2D_u5176_u5B83_u503C_u5F97_u6CE8_u610F_u7684_u6539_u53D8"><a href="#PHP5-3_u4E2D_u5176_u5B83_u503C_u5F97_u6CE8_u610F_u7684_u6539_u53D8" class="headerlink" title="PHP5.3中其它值得注意的改变"></a>PHP5.3中其它值得注意的改变</h3><p>1.1.1.修复了大量bug<br>1.1.2. PHP性能提高<br>1.1.3. php.ini中可使用变量<br>1.1.4. mysqlnd进入核心扩展 理论上说该扩展访问mysql速度会较之前的MySQL 和 MySQLi 扩展快（参见<a href="http://dev.mysql.com/downloads/connector/php-mysqlnd/）" target="_blank" rel="external">http://dev.mysql.com/downloads/connector/php-mysqlnd/）</a><br>1.1.5. ext/phar、ext/intl、ext/fileinfo、ext/sqlite3和ext/enchant等扩展默认随PHP绑定发布。其中Phar可用于打包PHP程序，类似于Java中的jar机制。<br>1.1.6. ereg 正则表达式函数 不再默认可用，请使用速度更快的PCRE 正则表达式函数</p>
<h3 id="u5F03_u7528_u529F_u80FD"><a href="#u5F03_u7528_u529F_u80FD" class="headerlink" title="弃用功能"></a>弃用功能</h3><p>PHP 5.3.0 新增了两个错误等级: E_DEPRECATED 和 E_USER_DEPRECATED. 错误等级 E_DEPRECATED 被用来说明一个函数或者功能已经被弃用. E_USER_DEPRECATED 等级目的在于表明用户代码中的弃用功能, 类似于 E_USER_ERROR 和 E_USER_WARNING 等级.<br>下面是被弃用的 INI 指令列表. 使用下面任何指令都将导致 E_DEPRECATED 错误.<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define_syslog_variables</span><br><span class="line">register_globals</span><br><span class="line">register_long_arrays</span><br><span class="line">safe_mode</span><br><span class="line">magic_quotes_gpc</span><br><span class="line">magic_quotes_runtime</span><br><span class="line">magic_quotes_sybase</span><br></pre></td></tr></table></figure></p>
<p>弃用 INI 文件中以 ‘#’ 开头的注释.<br>弃用函数:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">call_user_method() (使用 call_user_func() 替代)</span><br><span class="line">call_user_method_array() (使用 call_user_func_array() 替代)</span><br><span class="line">define_syslog_variables()</span><br><span class="line">dl()</span><br><span class="line">ereg() (使用 preg_match() 替代)</span><br><span class="line">ereg_replace() (使用 preg_replace() 替代)</span><br><span class="line">eregi() (使用 preg_match() 配合 <span class="string">'i'</span> 修正符替代)</span><br><span class="line">eregi_replace() (使用 preg_replace() 配合 <span class="string">'i'</span> 修正符替代)</span><br><span class="line">set_magic_quotes_runtime() 以及它的别名函数 magic_quotes_runtime()</span><br><span class="line">session_register() (使用 <span class="variable">$_SESSION</span> 超全部变量替代)</span><br><span class="line">session_unregister() (使用 <span class="variable">$_SESSION</span> 超全部变量替代)</span><br><span class="line">session_is_registered() (使用 <span class="variable">$_SESSION</span> 超全部变量替代)</span><br><span class="line">set_socket_blocking() (使用 stream_set_blocking() 替代)</span><br><span class="line">split() (使用 preg_split() 替代)</span><br><span class="line">spliti() (使用 preg_split() 配合 <span class="string">'i'</span> 修正符替代)</span><br><span class="line">sql_regcase()</span><br><span class="line">mysql_db_query() (使用 mysql_select_db() 和 mysql_query() 替代)</span><br><span class="line">mysql_escape_string() (使用 mysql_real_escape_string() 替代)</span><br></pre></td></tr></table></figure></p>
<p>废弃以字符串传递区域设置名称. 使用 LC_* 系列常量替代.<br>mktime() 的 is_dst 参数. 使用新的时区处理函数替代.</p>
<p><strong>更多新特性，参加官网：<a href="http://php.net/manual/en/migration53.new-features.php" target="_blank" rel="external">http://php.net/manual/en/migration53.new-features.php</a></strong></p>
<h2 id="PHP_5-4_new_feature"><a href="#PHP_5-4_new_feature" class="headerlink" title="PHP 5.4 new feature"></a>PHP 5.4 new feature</h2><h3 id="Traits"><a href="#Traits" class="headerlink" title="Traits"></a>Traits</h3><p>Traits提供了一种灵活的代码重用机制，即不像interface一样只能定义方法但不能实现，又不能像class一样只能单继承。至于在实践中怎样使用，还需要深入思考。<br>魔术常量为<code>__TRAIT__</code><br>官网的一个例子：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> SayWorld &#123;  </span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">                <span class="keyword">parent</span>::sayHello();  </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">"World!\n"</span>;  </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'ID:'</span> . <span class="variable">$this</span>-&gt;id . <span class="string">"\n"</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'Hello '</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHelloWorld</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$id</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">                <span class="variable">$this</span>-&gt;id = <span class="number">123456</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">use</span> <span class="title">SayWorld</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="variable">$o</span> = <span class="keyword">new</span> MyHelloWorld();  </span><br><span class="line"><span class="variable">$o</span>-&gt;sayHello();  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/*will output: </span><br><span class="line">Hello World! </span><br><span class="line">ID:123456 </span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Short_array_syntax__u6570_u7EC4_u7B80_u77ED_u8BED_u6CD5"><a href="#Short_array_syntax__u6570_u7EC4_u7B80_u77ED_u8BED_u6CD5" class="headerlink" title="Short array syntax 数组简短语法"></a>Short array syntax 数组简短语法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$arr</span> = [<span class="number">1</span>,<span class="string">'james'</span>, <span class="string">'james@fwso.cn'</span>];  </span><br><span class="line"><span class="variable">$array</span> = [  </span><br><span class="line">　　<span class="string">"foo"</span> =&gt; <span class="string">"bar"</span>,  </span><br><span class="line">　　<span class="string">"bar"</span> =&gt; <span class="string">"foo"</span>  </span><br><span class="line">　　];</span><br></pre></td></tr></table></figure>
<h3 id="Array_dereferencing__u6570_u7EC4_u503C"><a href="#Array_dereferencing__u6570_u7EC4_u503C" class="headerlink" title="Array dereferencing 数组值"></a>Array dereferencing 数组值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myfunc</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">array</span>(<span class="number">1</span>,<span class="string">'james'</span>, <span class="string">'james@fwso.cn'</span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">#以前我们需要这样：</span></span><br><span class="line"><span class="variable">$arr</span> = myfunc();  </span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">1</span>];  </span><br><span class="line"><span class="comment">#在PHP5.4中这样就行了：</span></span><br><span class="line"><span class="keyword">echo</span> myfunc()[<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<p>本例要注意一个要点 <a href="http://www.laruence.com/2011/12/19/2409.html" target="_blank" rel="external">http://www.laruence.com/2011/12/19/2409.html</a></p>
<h3 id="u5B9E_u4F8B_u5316_u7C7B"><a href="#u5B9E_u4F8B_u5316_u7C7B" class="headerlink" title="实例化类"></a>实例化类</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span></span>&#123;  </span><br><span class="line">		<span class="keyword">return</span> <span class="string">'test'</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">echo</span> (<span class="keyword">new</span> test())-&gt;show();</span><br></pre></td></tr></table></figure>
<h3 id="u652F_u6301_Class_3A_3A_7Bexpr_7D_28_29__u8BED_u6CD5"><a href="#u652F_u6301_Class_3A_3A_7Bexpr_7D_28_29__u8BED_u6CD5" class="headerlink" title="支持 Class::{expr}() 语法"></a>支持 Class::{expr}() 语法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> ([<span class="keyword">new</span> Human(<span class="string">"Gonzalo"</span>), <span class="keyword">new</span> Human(<span class="string">"Peter"</span>)] <span class="keyword">as</span> <span class="variable">$human</span>) &#123;  </span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$human</span>-&gt;&#123;<span class="string">'hello'</span>&#125;();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Callable_typehint"><a href="#Callable_typehint" class="headerlink" title="Callable typehint"></a>Callable typehint</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(callable <span class="variable">$callback</span>)</span> </span>&#123;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">foo(<span class="string">"false"</span>); <span class="comment">//错误，因为false不是callable类型  </span></span><br><span class="line">foo(<span class="string">"printf"</span>); <span class="comment">//正确  </span></span><br><span class="line">foo(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;); <span class="comment">//正确  </span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;  </span><br><span class="line">　　<span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">foo(<span class="keyword">array</span>(<span class="string">"A"</span>, <span class="string">"show"</span>)); <span class="comment">//正确</span></span><br></pre></td></tr></table></figure>
<h3 id="u51FD_u6570_u7C7B_u578B_u63D0_u793A_u7684_u589E_u5F3A"><a href="#u51FD_u6570_u7C7B_u578B_u63D0_u793A_u7684_u589E_u5F3A" class="headerlink" title="函数类型提示的增强"></a>函数类型提示的增强</h3><p>由于php是弱类型的语言，因此在php 5.0后，引入了函数类型提示的功能，其含义为对于传入函数中的参数都进行类型检查，举个例子，有如下的类:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">bar</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(bar <span class="variable">$foo</span>)</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//其中函数foo中的参数规定了传入的参数必须为bar类的实例，否则系统会判断出错。同样对于数组来说，也可以进行判断，比如：  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(array <span class="variable">$foo</span>)</span> </span>&#123;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">foo(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 正确，因为传入的是数组  </span></span><br><span class="line">foo(<span class="number">123</span>); <span class="comment">// 不正确，传入的不是数组</span></span><br></pre></td></tr></table></figure></p>
<h3 id="PHP_5-4-0__u6027_u80FD_u5927_u5E45_u63D0_u5347_uFF0C__u4FEE_u590D_u8D85_u8FC7100_u4E2Abug"><a href="#PHP_5-4-0__u6027_u80FD_u5927_u5E45_u63D0_u5347_uFF0C__u4FEE_u590D_u8D85_u8FC7100_u4E2Abug" class="headerlink" title="PHP 5.4.0 性能大幅提升， 修复超过100个bug."></a>PHP 5.4.0 性能大幅提升， 修复超过100个bug.</h3><p>废除了register_globals, magic_quotes以及安全模式。<br>另外值得一提的是多字节支持已经默认启用了，<br>default_charset从ISO-8859-1已经变为UTF-8.<br>默认发送“Content-Type: text/html; charset=utf-8”，<br>你再也不需要在HTML里写meta tag，也无需为UTF-8兼容而传送额外的header了。</p>
<p>删除的特性<br>最后，我们集中整理了几年来标记为已弃用的多个特性。这些特性包括 allow_call_time_pass_reference、define_syslog_variables、highlight.bg、register_globals、register_long_arrays、magic_quotes、safe_mode、zend.ze1_compatibility_mode、session.bug_compat42、session.bug_compat_warn 以及 y2k_compliance。<br>除了这些特性之外，magic_quotes 可能是最大的危险。在早期版本中，未考虑因 magic_quotes 出错导致的后果，简单编写且未采取任何举措使自身免受 SQL 注入攻击的应用程序都通过 magic_quotes 来保护。如果在升级到 PHP 5.4 时未验证已采取正确的 SQLi 保护措施，则可能导致安全漏洞。</p>
<p>其他改动和特性<br>有一种新的“可调用的”类型提示，用于某方法采用回调作为参数的情况。<br><code>htmlspecialchars()</code> 和 <code>htmlentities()</code> 现在可更好地支持亚洲字符，如果未在 php.ini 文件中显式设置 PHP default_charset，这两个函数默认使用 UTF-8 而不是 ISO-8859-1。<br><code>&lt;?=</code>（精简回显语法）现在始终可用，无论 short_tags ini 设置的值为何。这应该使模板化系统创建者感到满意。<br>会话 ID 现在默认通过 /dev/urandom（或等效文件）中的熵生成，而不是与早期版本一样成为必须显式启用的一个选项。<br>mysqlnd 这一捆绑的 MySQL 原生驱动程序库现在默认用于与 MySQL 通信的各种扩展，除非在编译时通过 ./configure 被显式覆盖。<br>可能还有 100 个小的改动和特性。从 PHP 5.3 升级到 5.4 应该极为顺畅，但请阅读迁移指南加以确保。如果您从早期版本升级，执行的操作可能稍多一些。请查看以前的迁移指南再开始升级。</p>
<p><strong>更多新特性，参照官网：<a href="http://php.net/manual/en/migration54.new-features.php" target="_blank" rel="external">http://php.net/manual/en/migration54.new-features.php</a></strong></p>
<h2 id="PHP5-5_new_feature"><a href="#PHP5-5_new_feature" class="headerlink" title="PHP5.5 new feature"></a>PHP5.5 new feature</h2><h3 id="u653E_u5F03_u5BF9Windows_XP_u548C2003__u7684_u652F_u6301"><a href="#u653E_u5F03_u5BF9Windows_XP_u548C2003__u7684_u652F_u6301" class="headerlink" title="放弃对Windows XP和2003 的支持"></a>放弃对Windows XP和2003 的支持</h3><h3 id="u5F03_u7528e_u4FEE_u9970_u7B26"><a href="#u5F03_u7528e_u4FEE_u9970_u7B26" class="headerlink" title="弃用e修饰符"></a>弃用e修饰符</h3><p>e修饰符是指示preg_replace函数用来评估替换字符串作为PHP代码，而不只是仅仅做一个简单的字符串替换。不出所料，这种行为会源源不断的出现安全问题。这就是为什么在PHP5.5 中使用这个修饰符将抛出一个弃用警告。作为替代，你应该使用preg_replace_callback函数。你可以从RFC找到更多关于这个变化相应的信息。</p>
<h3 id="u65B0_u589E_u51FD_u6570_u548C_u7C7B"><a href="#u65B0_u589E_u51FD_u6570_u548C_u7C7B" class="headerlink" title="新增函数和类"></a>新增函数和类</h3><p><strong>boolval()</strong><br>PHP已经实现了strval、intval和floatval的函数。为了达到一致性将添加boolval函数。它完全可以作为一个布尔值计算，也可以作为一个回调函数。<br><strong>hash_pbkdf2()</strong><br>PBKDF2全称“Password-Based Key Derivation Function 2”，正如它的名字一样，是一种从密码派生出加密密钥的算法。这就需要加密算法，也可以用于对密码哈希。更广泛的说明和用法示例<br><strong>array_column()</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从数据库获取一列，但返回是数组。  </span></span><br><span class="line"><span class="variable">$userNames</span> = [];  </span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$user</span>) &#123;  </span><br><span class="line">    <span class="variable">$userNames</span>[] = <span class="variable">$user</span>[<span class="string">'name'</span>];  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//以前获取数组某列值，现在如下  </span></span><br><span class="line"><span class="variable">$userNames</span> = array_column(<span class="variable">$users</span>, <span class="string">'name'</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>intl 扩展 </strong><br>将有许多改进 intl的扩展。例如，将会有新的IntlCalendar,IntlGregorianCalendar,IntlTimeZone,IntlBreakIterator,IntlRuleBasedBreakIterator,IntlCodePointBreakIterator类。之前，我竟然不知道有这么多关于intl扩展，如果你想知道更多，我建议你去最新公告里找 Calendar和 BreakIterator。 </p>
<h3 id="u4E00_u4E2A_u7B80_u5355_u7684_u5BC6_u7801_u6563_u5217API"><a href="#u4E00_u4E2A_u7B80_u5355_u7684_u5BC6_u7801_u6563_u5217API" class="headerlink" title="一个简单的密码散列API"></a>一个简单的密码散列API</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$password</span> = <span class="string">"foo"</span>;    </span><br><span class="line"><span class="comment">// creating the hash    </span></span><br><span class="line"><span class="variable">$hash</span> = password_hash(<span class="variable">$password</span>, PASSWORD_BCRYPT);    </span><br><span class="line"><span class="comment">// verifying a password    </span></span><br><span class="line"><span class="keyword">if</span> (password_verify(<span class="variable">$password</span>, <span class="variable">$hash</span>)) &#123;    </span><br><span class="line">    <span class="comment">// password correct!    </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;    </span><br><span class="line">    <span class="comment">// password wrong!    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u65B0_u7684_u8BED_u8A00_u7279_u6027_u548C_u589E_u5F3A_u529F_u80FD_u3002"><a href="#u65B0_u7684_u8BED_u8A00_u7279_u6027_u548C_u589E_u5F3A_u529F_u80FD_u3002" class="headerlink" title="新的语言特性和增强功能。"></a>新的语言特性和增强功能。</h3><p><strong>常量引用</strong><br>“常量引用”意味着数组可以直接操作字符串和数组字面值。举两个例子:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomHexString</span><span class="params">(<span class="variable">$length</span>)</span> </span>&#123;    </span><br><span class="line">    <span class="variable">$str</span> = <span class="string">''</span>;    </span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$length</span>; ++<span class="variable">$i</span>) &#123;    </span><br><span class="line">        <span class="variable">$str</span> .= <span class="string">"0123456789abcdef"</span>[mt_rand(<span class="number">0</span>, <span class="number">15</span>)]; <span class="comment">// direct dereference of string    </span></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;    </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomBool</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">false</span>, <span class="keyword">true</span>][mt_rand(<span class="number">0</span>, <span class="number">1</span>)]; <span class="comment">// direct dereference of array    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我不认为在实践中会使用此功能，但它使语言更加一致。请参阅 RFC。</p>
<h3 id="u8C03_u7528empty_28_29_u51FD_u6570_28_u548C_u5176_u4ED6_u8868_u8FBE_u5F0F_29_u4E00_u8D77_u5DE5_u4F5C"><a href="#u8C03_u7528empty_28_29_u51FD_u6570_28_u548C_u5176_u4ED6_u8868_u8FBE_u5F0F_29_u4E00_u8D77_u5DE5_u4F5C" class="headerlink" title="调用empty()函数(和其他表达式)一起工作"></a>调用empty()函数(和其他表达式)一起工作</h3><p>目前，empty()语言构造只能用在变量，而不能在其他表达式。<br>在特定的代码像empty($this-&gt;getFriends())将会抛出一个错误。作为PHP5.5 这将成为有效的代码</p>
<h3 id="u83B7_u53D6_u5B8C_u6574_u7C7B_u522B_u540D_u79F0"><a href="#u83B7_u53D6_u5B8C_u6574_u7C7B_u522B_u540D_u79F0" class="headerlink" title="获取完整类别名称"></a>获取完整类别名称</h3><p>PHP5.3 中引入命名空间的别名类和命名空间短版本的功能。虽然这并不适用于字符串类名称<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Some</span>\<span class="title">Deeply</span>\<span class="title">Nested</span>\<span class="title">Namespace</span>\<span class="title">FooBar</span>;    </span><br><span class="line"><span class="comment">// does not work, because this will try to use the global `FooBar` class    </span></span><br><span class="line"><span class="variable">$reflection</span> = <span class="keyword">new</span> ReflectionClass(<span class="string">'FooBar'</span>);   </span><br><span class="line"><span class="keyword">echo</span> FooBar::class;</span><br></pre></td></tr></table></figure></p>
<p>为了解决这个问题采用新的<code>FooBar::class</code>语法，它返回类的完整类别名称, 这里::class 等价于get_class（）</p>
<h3 id="u53C2_u6570_u8DF3_u8DC3"><a href="#u53C2_u6570_u8DF3_u8DC3" class="headerlink" title="参数跳跃"></a>参数跳跃</h3><p>如果你有一个函数接受多个可选的参数，目前没有办法只改变最后一个参数，而让其他所有参数为默认值。<br>RFC上的例子，如果你有一个函数如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create_query</span><span class="params">(<span class="variable">$where</span>, <span class="variable">$order_by</span>, <span class="variable">$join_type</span>=<span class="string">''</span>, <span class="variable">$execute</span> = false, <span class="variable">$report_errors</span> = true)</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure></p>
<p>那么有没有办法设置$report_errors=false，而其他两个为默认值。为了解决这个跳跃参数的问题而提出：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_query(<span class="string">"deleted=0"</span>, <span class="string">"name"</span>, <span class="keyword">default</span>, <span class="keyword">default</span>, <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure></p>
<p>我个人不是特别喜欢这个提议。在我的眼睛里，代码需要这个功能，只是设计不当。函数不应该有12个可选参数。 </p>
<h3 id="Getter__u548C_Setter"><a href="#Getter__u548C_Setter" class="headerlink" title="Getter 和 Setter"></a>Getter 和 Setter</h3><p>如果你从不喜欢写这些getXYZ()和setXYZ($value)方法，那么这应该是你最受欢迎的改变。提议添加一个新的语法来定义一个属性的设置/读取:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimePeriod</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$seconds</span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$hours</span> &#123;  </span><br><span class="line">        get &#123; <span class="keyword">return</span> <span class="variable">$this</span>-&gt;seconds / <span class="number">3600</span>; &#125;  </span><br><span class="line">        set &#123; <span class="variable">$this</span>-&gt;seconds = <span class="variable">$value</span> * <span class="number">3600</span>; &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="variable">$timePeriod</span> = <span class="keyword">new</span> TimePeriod;  </span><br><span class="line"><span class="variable">$timePeriod</span>-&gt;hours = <span class="number">10</span>;  </span><br><span class="line">var_dump(<span class="variable">$timePeriod</span>-&gt;seconds); <span class="comment">// int(36000)  </span></span><br><span class="line">var_dump(<span class="variable">$timePeriod</span>-&gt;hours);   <span class="comment">// int(10)</span></span><br></pre></td></tr></table></figure></p>
<h3 id="u751F_u6210_u5668_yield"><a href="#u751F_u6210_u5668_yield" class="headerlink" title="生成器 yield"></a>生成器 yield</h3><p>目前，自定义迭代器很少使用，因为它们的实现，需要大量的样板代码。生成器解决这个问题，并提供了一种简单的样板代码来创建迭代器。<br>例如，你可以定义一个范围函数作为迭代器:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span>  </span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">xrange</span><span class="params">(<span class="variable">$start</span>, <span class="variable">$end</span>, <span class="variable">$step</span> = <span class="number">1</span>)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="variable">$start</span>; <span class="variable">$i</span> &lt; <span class="variable">$end</span>; <span class="variable">$i</span> += <span class="variable">$step</span>) &#123;  </span><br><span class="line">        <span class="keyword">yield</span> <span class="variable">$i</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">foreach</span> (xrange(<span class="number">10</span>, <span class="number">20</span>) <span class="keyword">as</span> <span class="variable">$i</span>) &#123;  </span><br><span class="line">    <span class="comment">// ...  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上述xrange函数具有与内建函数相同的行为，但有一点区别：不是返回一个数组的所有值，而是返回一个迭代器动态生成的值。</p>
<h3 id="foreach__u652F_u6301list_28_29"><a href="#foreach__u652F_u6301list_28_29" class="headerlink" title="foreach 支持list()"></a>foreach 支持list()</h3><p>对于“数组的数组”进行迭代，之前需要使用两个foreach，现在只需要使用foreach + list了，但是这个数组的数组中的每个数组的个数需要一样。看文档的例子一看就明白了。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$array</span> = [  </span><br><span class="line">    [<span class="number">1</span>, <span class="number">2</span>],  </span><br><span class="line">    [<span class="number">3</span>, <span class="number">4</span>],  </span><br><span class="line">];  </span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="keyword">list</span>(<span class="variable">$a</span>, <span class="variable">$b</span>)) &#123;  </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"A: $a; B: $b\n"</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>更多新特性，参照官网：<a href="http://php.net/manual/en/migration55.new-features.php" target="_blank" rel="external">http://php.net/manual/en/migration55.new-features.php</a></strong></p>
<h2 id="PHP5-6_new_feature"><a href="#PHP5-6_new_feature" class="headerlink" title="PHP5.6 new feature"></a>PHP5.6 new feature</h2><h3 id="u547D_u540D_u7A7A_u95F4_use__u64CD_u4F5C_u7B26_u5F00_u59CB_u652F_u6301_u51FD_u6570_u548C_u5E38_u91CF_u7684_u5BFC_u5165"><a href="#u547D_u540D_u7A7A_u95F4_use__u64CD_u4F5C_u7B26_u5F00_u59CB_u652F_u6301_u51FD_u6570_u548C_u5E38_u91CF_u7684_u5BFC_u5165" class="headerlink" title="命名空间 use 操作符开始支持函数和常量的导入"></a>命名空间 use 操作符开始支持函数和常量的导入</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Name</span>\<span class="title">Space</span> &#123;  </span><br><span class="line">    <span class="title">const</span> <span class="title">FOO</span> = 42;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span> </span>&#123; <span class="keyword">echo</span> <span class="keyword">__FUNCTION__</span>.<span class="string">"\n"</span>; &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">namespace</span> &#123;  </span><br><span class="line">    <span class="title">use</span> <span class="title">const</span> <span class="title">Name</span>\<span class="title">Space</span>\<span class="title">FOO</span>;  </span><br><span class="line">    <span class="keyword">use</span> <span class="title">function</span> <span class="title">Name</span>\<span class="title">Space</span>\<span class="title">f</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">echo</span> FOO.<span class="string">"\n"</span>;  </span><br><span class="line">    f();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">42</span>  </span><br><span class="line">Name\Space\f</span><br></pre></td></tr></table></figure></p>
<h3 id="u4F7F_u7528**_u64CD_u4F5C_u7B26_u8BA1_u7B97_u4E58_u65B9"><a href="#u4F7F_u7528**_u64CD_u4F5C_u7B26_u8BA1_u7B97_u4E58_u65B9" class="headerlink" title="使用**操作符计算乘方"></a>使用**操作符计算乘方</h3><h3 id="phpdbg"><a href="#phpdbg" class="headerlink" title="phpdbg"></a>phpdbg</h3><p>PHP自带了一个交互式调试器phpdbg，它是一个SAPI模块，更多信息参考 phpdbg文档 。</p>
<h3 id="php_3A//input__u53EF_u4EE5_u88AB_u590D_u7528"><a href="#php_3A//input__u53EF_u4EE5_u88AB_u590D_u7528" class="headerlink" title="php://input 可以被复用"></a>php://input 可以被复用</h3><p>php://input 开始支持多次打开和读取，这给处理POST数据的模块的内存占用带来了极大的改善。</p>
<h3 id="u5927_u6587_u4EF6_u4E0A_u4F20_u652F_u6301"><a href="#u5927_u6587_u4EF6_u4E0A_u4F20_u652F_u6301" class="headerlink" title="大文件上传支持"></a>大文件上传支持</h3><p>可以上传超过2G的大文件。</p>
<p><strong>更多新特性，参照官网：<a href="http://php.net/manual/en/migration56.new-features.php" target="_blank" rel="external">http://php.net/manual/en/migration56.new-features.php</a></strong></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/29/train-vs-education/" itemprop="url">
                  培训机构毕业的程序员被歧视的背后逻辑
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-29T20:03:01+08:00" content="2015-11-29">
              2015-11-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/29/train-vs-education/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/29/train-vs-education/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u73B0_u72B6"><a href="#u73B0_u72B6" class="headerlink" title="现状"></a>现状</h2><p>现在，像达内、华清远见、国嵌、北大青鸟、传播智客等等 IT 培训机构很多，为尚未毕业的大学生、毕业了一时找不到工作的大学生、工作后想转行的再就业者提供了一个掌握新技能的机会，通过三个月或半年或更久的培训， 你就可以掌握某一种技能，比如 Android 开发、Java Web 开发、iOS 开发、嵌入式 Linux 开发，然后，没然后了吗……</p>
<p>Sorry，然后还是有的，只不过，“然后”并不是像培训机构的销售代表频频给你通电话时宣传的那样光明罢了。有的机构会推荐你就业直到你彻底失望他们推荐的单位，有的机构会放你出去闯荡江湖四处碰壁……形式不一，但，一段痛苦的旅程从此开始了，这倒是真的。</p>
<p>很多单位歧视培训机构毕业的学员，你所在的单位是这样吗？或者你从 IT 培训机构毕业后，找工作时被鄙视了吗？</p>
<p>为了弄明白为什么 IT 培训机构出来的程序员在找工作时经常遭遇不平等对待，我们需要弄明白“教育”和“培训”的差别。</p>
<h2 id="u6559_u80B2_u548C_u57F9_u8BAD"><a href="#u6559_u80B2_u548C_u57F9_u8BAD" class="headerlink" title="教育和培训"></a>教育和培训</h2><p>大致上讲，我们所说的“教育”，指的是掌握一般性的原理与技巧的过程；而我们所说的“培训”，不过是学会某种特定技能的过程。</p>
<p>上面是温伯格在《程序开发心理学》中说到的，符合大多数人对“教育”和“培训”的理解。</p>
<p>你可以通过培训机构学会理发、做饭、修汽车、写代码、做蛋糕，这没什么稀奇的，当我们接受培训时，就是为了某项技能而去的，不是吗？我去蓝翔，难道不是为了开挖掘机吗？</p>
<p>通常我们认为培训机构（学校）是学习某种不太复杂的谋生技能的摇篮。这种技能还有一个特点，就是相对稳定、变化不是特别频繁，能够在相当长一段时间内保持基本的稳定性。所以，一旦你获得了这项技能，就可以靠它吃饭吃上一阵子，一年半载，三年五年，十年八年，都有可能。</p>
<p>而教育，我们通常认为是一项基础性的工作，重知识，重原理，周期长，见效慢，与社会脱节，有时还能把人变傻（注意我不是讽刺现行教育制度，也不是诋 毁我们伟大的大学教育）。虽然如此，很多 IT 公司的基础部门还是被受过正规大学教育的朋友们占据了重要岗位。因为大家普遍认为，虽然学校教育严重脱离社会现实，但名牌大学的学生的智力水平、学习能 力，平均来看还是高于未能考上大学的中学生，更适合于从事某种对智力、学习能力有些特别要求的技术岗位。</p>
<p>没错，程序员正是这样的岗位。程序员的平均智力水平和学习能力高于大部分的其它行业从业者。</p>
<p>然而，教育和培训的差别，并不是关键。关键是，出于某种原因，面试官或公司主管对出身“培训机构”的人有偏见。为了说明这一点，我们先要看看程序员需要的特殊能力。</p>
<p>成为一个合格的程序员，需要以下“特殊”能力：</p>
<ul>
<li><p>自知之明</p>
</li>
<li><p>自我学习</p>
</li>
<li><p>努力</p>
</li>
</ul>
<p>看起来没什么出奇之处，也许你会觉得一个程序员最重要的能力不是上面三项，没关系，知否知否，应是绿肥红瘦，随便怎么看，横看成岭侧成峰，一千个观众就有一千个哈姆雷特，嗯，开启口水模式……这里省略 500 字……</p>
<p>大家公认程序员从事的是烧脑性工作，行业发展日新月异，各种新语言新技术新框架新概念层出不穷，需要程序员时刻保持归零的学习心态，持续不断地保持学习维持竞争能力和价值。所以，我也是从这个角度出发，选择了前面提到的三点，实际上这三点指向的是<strong>“[学习之道]”</strong>。</p>
<h2 id="u81EA_u77E5_u4E4B_u660E"><a href="#u81EA_u77E5_u4E4B_u660E" class="headerlink" title="自知之明"></a>自知之明</h2><p>我们要了解自己拥有什么、缺乏什么，然后才能开始学习。</p>
<p>通过不断地总结、回顾自己做过的事情，我们就可以慢慢了解自己的能力边界。哪些事情做好了，好在哪里，为什么好在那里而不是别处，是由你自身的哪种 行为、才干、能力决定的？哪些事情做得不好，坏在哪里，为什么坏在那个点而不是其它的点，改善你自身的哪种行为或能力可以改变事情的走向，还是说你没什么 能改变的那就是你的局限？</p>
<p>当你了解了自己，就能发现自己应该做什么，就能决定自己的学习方向，而不是盲目地把自己交付给别人（学校、老师、家长、培训机构），因为，没有什么人真的可以为你负责，能为你负责的，只有你自己。</p>
<p>当然，自知是最难的事，也不是一朝一夕的事，需要不断的自省和内视才可以做到。</p>
<h2 id="u81EA_u6211_u5B66_u4E60"><a href="#u81EA_u6211_u5B66_u4E60" class="headerlink" title="自我学习"></a>自我学习</h2><p>知名的教育专家林格有两本非常著名的书，《教育是没有用的》和《学习是不需要教的》。林格有一个非常核心的观点：学习能力是人与生俱来的能力，是人 之天赋，是不需要教的，但这种能力会随着年龄的增长和家庭教育、学校教育的误导而萎缩或消失，所以，教育的方向就是营造一个环境，让人自己发现自己的学习 能力。</p>
<p>六祖慧能一朝顿悟传承衣钵，佛性自在每人心中。只不过，世人多如神秀，认为“身是菩提树，心如明镜台，时时勤拂拭，勿使惹尘埃”，一定要借助外力和 各种各样的清规戒律，方可保持灵台清明，最终获得某种修行。这种扭曲了教育本质的说法、做法大行其道，导致中学教育（大学相对自由）重知识、重规矩、重技 能而轻发现、轻唤醒、轻因材施教、轻有教无类，最终扼杀了学生的自我学习能力。所以，很多人不是天生不会学习，而是在成长过程中在家庭、学校、社会的各种 外力撕扯中慢慢丧失了自我学习能力。更甚之，多数人不自知这种能力的丧失。</p>
<p><strong>然而，程序员尤其需要自我学习能力。</strong></p>
<p>学校会教你操作系统原理，会教你计算机组成原理，会教你算法，会教你C语言，会教你 Java，各种知识都会教你。然而你到工作中，能不能用你学到的知识解决问题，实在是个未知数。</p>
<p>培训机构会教你怎么写 Java 代码，怎么安装某个 IDE，怎么完成一个个人博客或购物车之类的小项目。然而，你是在框好的架子下被动地按照老师的要求“完成”了这些事。到了工作中，面对巨大的未知和陌生的项目，你能不能举一反三灵活运用，充满了未知。</p>
<p>一个程序员能不能自己学会一门技术、能不能自己解决一个问题特别重要</p>
<p>因为，很少有主管会手把手的教会你编程和设计的实际技巧，也很少有主管会大发慈悲把你送去研习班学习工作需要的技能，在一个现实的环境里，一切都要 靠你自己。假如你自己不能独立习得某项必须的技术，真没有人能帮得上你。假如你自己不能独立解决问题，真没有人能始终拉扯着你。这也正合梁漱溟说的话： “任何一个人的学问成就，都是出于自学。学校教育不过给学生一个开端，使他更容易自学而已。青年于此，不可不勉。”</p>
<p>很多人轻视培训机构，是认为培训机构的老师，多数脱产，没有丰富的一线工程实践，是业余选手，而这些“业余选手”却要通过短短的一期培训来为社会培 养“专业选手”，这基本是一个笑话。即便我们能举出不少从培训机构出来的优秀选手，那也只能说明，这个选手本身具有很好的学习能力。</p>
<p>如果一个人意识到了自己还具备自我学习能力，那他完全没必要去培训机构浪费动辄六七千一两万的学费——他完全可以自己学到必须的知识和技能，假如他真有兴趣的话。</p>
<p>而要检验你是否还有自我学习能力，先不要去培训机构，自己找本讲编程的书、找台电脑、连上网，花一两个月时间就能搞明白你是否适合做一个程序员。一旦你通过了这种自我学习实验，那时再挑一个培训机构系统地学习某条技术栈不迟。</p>
<p>言而总之，你能不能成为合格的或优秀的程序员，取决于自我学习能力，而不是参加过专业培训。所以，很多公司在招募程序员时，不太愿意考虑培训机构毕 业的学员，因为在面试官的心里，觉得如果你有能力，自己就可以学会，完全没必要去培训机构，你接受了培训，他反倒认为你可能缺乏自我学习能力（以及对技术 的兴趣），担心你不能胜任将来的工作，他太了解了，你学的那点东西根本不够用，还有很多新东西等着你学，所以，他不愿意考虑你。</p>
<p>而对于知名大学的毕业生，虽然可能和你一样是一张白纸，但别人会以为，能进得了大学当得了学霸，起码学习能力没问题的概率高一些。</p>
<h2 id="u52AA_u529B"><a href="#u52AA_u529B" class="headerlink" title="努力"></a>努力</h2><p>有一句话是这么说的，“以大多数人的努力程度之低，根本还轮不到拼天赋”。其实，努力也是一种天赋。为什么有的人明知努力可以改变生活，可他还是不 努力呢？因为，臣妾做不到啊！为什么做不到，因为他缺乏“勤奋”、“努力”之类的天赋和才干。真的，勤奋、努力的人，多数是生就的，少数是被后妈（生活） 逼的。</p>
<p>程序员白天要上班，晚上偶尔还要加个班，自由时间少，而新技术很多，什么时候去学呢？你以为实际的项目一定可以让你锻炼新技术吗？要知道，大部分的 项目在技术选型时，会考虑技术的成熟度和团队的技术储备，很少有冒险采用大家都不熟悉的技术的，不可控因素太多，风险太大，项目失败的概率很高。那这样的 话，你什么时间丰富自己呢？</p>
<p>八小时之内是现在，八小时之外是将来。你可以用的，就是你的业余时间了。你看，人家都在打游戏、看电视、挎着女伴的胳膊去速8，你还要苦哈哈的学习，如果你没有“努力”这种天赋，是很难做到的。</p>
<p>所以，很多面试官在面对培训机构毕业的人选时，也会有诸如“如果你有自我学习能力并且努力，其实没必要上什么培训班，完全可以自己搞定”之类的想 法，而你上了培训班，是不是反过来证明你不够努力咧……然后，他又会想，是不是因为你没自知之明不知道自己要干啥才被忽悠到培训机构去交学费了呢……也 许，他还会想，是不是因为你对技术其实不感兴趣只是想谋个事儿干呢……</p>
<p>额，你看，面无表情之下，其实各种想法如同暗流漩涡，澎湃不息……所以，最后，你可能就只好“回去等消息”了……</p>
<p>不知道说了这么多，你是否明白了个中原因——面试官会觉得培训出来的学员，可能对技术没有那么浓厚的兴趣、缺乏足够强的自我学习能力也不能很好的自 律和努力。但在我的观念里，其实应该这么看待 IT 培训机构的学员：他只是找了一个类似学校的地方系统学了一些东西，和别人并无什么不同，如果他对技术有兴趣，有自我学习能力，一样可以做一个优秀的程序员。</p>
<p>原文转自：<a href="http://developer.51cto.com/art/201511/498403.htm" target="_blank" rel="external">http://developer.51cto.com/art/201511/498403.htm</a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/07/learn-php-composer/" itemprop="url">
                  PHP依赖管理工具Composer入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-07T14:43:25+08:00" content="2015-11-07">
              2015-11-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/07/learn-php-composer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/07/learn-php-composer/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u4ECB_u7ECD"><a href="#u4ECB_u7ECD" class="headerlink" title="介绍"></a>介绍</h2><p>Composer是PHP中的一个依赖管理工具. 它可以让你声明自己项目所依赖的库，然后它将会在项目中为你安装这些库。</p>
<h2 id="u4F9D_u8D56_u7BA1_u7406"><a href="#u4F9D_u8D56_u7BA1_u7406" class="headerlink" title="依赖管理"></a>依赖管理</h2><p>Composer不是包管理器。是的，它实际上和”包”或者库打交道，但是它是以项目为单位进行管理，把它们安装到你项目中的一个目录（例如vendor）。默认情况下它不会以全局的方式安装任何东西。因此，它是一个依赖管理器。</p>
<p>这个想法并不新鲜，Composer的灵感是来自于node的npm和ruby的bundler。但是目前PHP还没有一个这样的工具。<br><code>Composer</code>解决的问题是：</p>
<ul>
<li>你有一个依赖N多库的项目。</li>
<li>这些库中一些又依赖于其他的库。</li>
<li>你声明你所依赖的库。</li>
<li>Composer找出哪些包的哪个版本将会被安装，然后安装它们（也就是把它们下载到你的项目中）。</li>
</ul>
<h2 id="u58F0_u660E_u4F9D_u8D56_u5173_u7CFB"><a href="#u58F0_u660E_u4F9D_u8D56_u5173_u7CFB" class="headerlink" title="声明依赖关系"></a>声明依赖关系</h2><p>假设你正在创建一个项目，然后你需要一个日志操作的库。你决定使用monolog。为了把它加入到你的项目中，你需要做的就是创建一个名为composer.json的文件，其描述这个项目的依赖关系。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"require"</span>: &#123;</span><br><span class="line">        <span class="string">"monolog/monolog"</span>: <span class="string">"1.2.*"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们简单的描述说我们的项目依赖某个monolog/monolog包，版本只要是以1.2开头的就行。</p>
<h2 id="u7CFB_u7EDF_u8981_u6C42"><a href="#u7CFB_u7EDF_u8981_u6C42" class="headerlink" title="系统要求"></a>系统要求</h2><p>Composer需要PHP <strong>5.3.2+</strong> 才能运行。一些灵敏的PHP设置和编译选项也是必须的，不过安装程序 <code>installer</code> 会警告你任何不兼容的地方。<br>如果想要从源码而不是简单的从zip压缩包中安装软件包的话，你将需要git，svn或者hg，这依赖于软件包是通过什么进行版本控制的。<br>Composer是兼容多平台的，并且我们力争使其在Windows，Linux和OSX上的运行无差异。<br>安装 - *nix下载Composer可执行程序局部安装<br>为了获取Composer，我们需要做两件事。第一个是安装Composer（前面说过了，这意味下载它到你的项目中）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl <span class="operator">-s</span>S https://getcomposer.org/installer | php</span><br></pre></td></tr></table></figure></p>
<p>这只会检查一些PHP设置，然后下载<strong>composer.phar</strong>到你的工作目录中。这个文件是Composer二进制文件。它是一个PHAR <code>PHP archive</code>，PHP的归档格式，也可以像其他命令一样在命令行上运行。<br>你可以使用<code>--install-dir</code>选项，并且提供一个目标目录（可以是绝对或者相对路径）从而把Composer安装到一个指定的目录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl <span class="operator">-s</span>S https://getcomposer.org/installer | php -- --install-dir=bin</span><br></pre></td></tr></table></figure></p>
<p>你可以把这个文件放到任何你想放的地方。如果你把它放到你的PATH中，你就可以全局访问它了。在类unix系统中你甚至可以使它可执行，并且调用的时候不需要php。<br>你可以执行这些命令从而能够在你的系统上简单的访问composer：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl <span class="operator">-s</span>S https://getcomposer.org/installer | php</span><br><span class="line">$ sudo mv composer.phar /usr/<span class="built_in">local</span>/bin/composer</span><br></pre></td></tr></table></figure></p>
<p>然后，只需要执行composer命令来运行Composer，而不是php composer.phar。</p>
<h2 id="Windows_u4F7F_u7528_u5B89_u88C5_u7A0B_u5E8F"><a href="#Windows_u4F7F_u7528_u5B89_u88C5_u7A0B_u5E8F" class="headerlink" title="Windows使用安装程序"></a>Windows使用安装程序</h2><p>这是在你的机器上安装Composer最简单的方法。<br>下载并运行<a href="https://getcomposer.org/Composer-Setup.exe" target="_blank" rel="external">Composer-Setup.exe</a>，它将会安装最新的Composer版本并且设置好PATH，然后你就可以在命令中的任何目录下调用composer了。<br>手动安装<br>切换到一个存在于PATH环境变量中的目录，然后执行安装代码片段来下载composer.phar：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\username&gt;<span class="built_in">cd</span> C:\bin</span><br><span class="line">C:\bin&gt;php -r <span class="string">"eval('?&gt;'.file_get_contents('https://getcomposer.org/installer'));"</span></span><br></pre></td></tr></table></figure></p>
<p>创建一个新的以.bat结尾的composer文件:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\bin&gt;<span class="built_in">echo</span> @php <span class="string">"%~dp0composer.phar"</span> %*&gt;composer.bat</span><br></pre></td></tr></table></figure></p>
<p>关闭你当前的终端。打开一个新的终端测试一下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\username&gt;composer -V</span><br><span class="line">Composer version <span class="number">27</span>d8904</span><br><span class="line"> </span><br><span class="line">C:\Users\username&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="u4F7F_u7528Composer"><a href="#u4F7F_u7528Composer" class="headerlink" title="使用Composer"></a>使用Composer</h2><p>我们接下来要使用Composer来安装项目的依赖。如果你在当前目录下没有一个叫作<strong>composer.json</strong>的文件，请跳到基本使用章节。<br>为了解决并下载依赖，运行install命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ php composer.phar install</span><br></pre></td></tr></table></figure></p>
<p>如果你是全局安装，并且目录下没有phar文件，那么运行这个：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ composer install</span><br></pre></td></tr></table></figure></p>
<p>如果是上面的例子，这个操作将会下载monolog到vendor/monolog/monolog目录。<br>自动加载<br>除了下载库之外，Composer也会创建一个自动加载文件，这个文件能够自动加载Composer下载的库中所有的类。如果想使用它，只需要在你代码启动的地方加上如下代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require <span class="string">'vendor/autoload.php'</span>;</span><br></pre></td></tr></table></figure></p>
<p>哇哦！现在开始使用monolog吧! 如果想进一步学习Composer，继续阅读「基本使用」章节。 如果想要找需要的package，到Packagist。</p>
<p>参考  英文原文：<a href="http://getcomposer.org/doc/00-intro.md" target="_blank" rel="external">http://getcomposer.org/doc/00-intro.md</a></p>
<p>(完)</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/27/js-qrcode/" itemprop="url">
                  二维码图片生成器QRCode.js
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-09-27T16:03:01+08:00" content="2015-09-27">
              2015-09-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日薪越亿/" itemprop="url" rel="index">
                    <span itemprop="name">日薪越亿</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/27/js-qrcode/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/27/js-qrcode/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u4E8C_u7EF4_u7801_u662F_u4EC0_u4E48_uFF1F"><a href="#u4E8C_u7EF4_u7801_u662F_u4EC0_u4E48_uFF1F" class="headerlink" title="二维码是什么？"></a>二维码是什么？</h2><p>百度百科上是这样介绍二维码的：二维码（Quick Response Code），又称二维条码，它是用特定的几何图形按一定规律在平面（二维方向）上分布的黑白相间的图形，是所有信息数据的一把钥匙。在现代商业活动中，可实现的应用十分广泛，如：产品防伪/溯源、广告推送、网站链接、数据下载、商品交易、定位/导航、电子商务应用、车辆管理、信息传递等。如今智能手机扫一扫（简称313）功能的应用使得二维码更加普遍，随着国内物联网产业的蓬勃发展，更多的二维码技术应用解决方案被开发，二维码成为移动互联网入口真正成为现实。 </p>
<h2 id="QRCode-js_u8BF4_u660E"><a href="#QRCode-js_u8BF4_u660E" class="headerlink" title="QRCode.js说明"></a>QRCode.js说明</h2><p>QRCode.js是一个实现生成二维码(QRCode)的js插件。 QRCode.js有着良好的跨浏览器兼容性（高版本使用HTML5的 Canvas，低版本IE使用table元素绘制），而且QRCode.js没有任何依赖。只需要引用一个QRCode.js。</p>
<h2 id="u4F7F_u7528QRCode-js"><a href="#u4F7F_u7528QRCode-js" class="headerlink" title="使用QRCode.js"></a>使用QRCode.js</h2><h3 id="u5F15_u5165qrcode-js"><a href="#u5F15_u5165qrcode-js" class="headerlink" title="引入qrcode.js"></a>引入qrcode.js</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=”qrcode.js” <span class="built_in">type</span>=”text/javascript”&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="HTML_u4EE3_u7801"><a href="#HTML_u4EE3_u7801" class="headerlink" title="HTML代码"></a>HTML代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=”qrcode”&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JS_u4EE3_u7801"><a href="#JS_u4EE3_u7801" class="headerlink" title="JS代码"></a>JS代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//初始化QRCode对象</span><br><span class="line">var qrcode = new QRCode(document.getElementById(“qrcode”));</span><br><span class="line"></span><br><span class="line">//也可以在初始化QRCode对象，传入更多参数</span><br><span class="line">var qrcode = new QRCode(document.getElementById(“qrcode”),&#123;</span><br><span class="line">	width: <span class="number">128</span>,</span><br><span class="line">	height: <span class="number">128</span>,</span><br><span class="line">	colorDark : “<span class="comment">#000000″,</span></span><br><span class="line">	colorLight : “<span class="comment">#ffffff”,</span></span><br><span class="line">	correctLevel : QRCode.CorrectLevel.H</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//需要生成二维码的字符串</span><br><span class="line">qrcode.makeCode(“http://www.leixuesong.cn”);</span><br><span class="line"></span><br><span class="line">//清除二维码</span><br><span class="line">qrcode.clear();</span><br></pre></td></tr></table></figure>
<h3 id="u53C2_u6570_u8BF4_u660E"><a href="#u53C2_u6570_u8BF4_u660E" class="headerlink" title="参数说明"></a>参数说明</h3><table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>render</td>
<td>string</td>
<td>配置用哪个节点元素画二维码，选项有table、svg和canvas，默认的选择顺序为 canvas -&gt; svg -&gt; table</td>
</tr>
<tr>
<td>text</td>
<td>string</td>
<td>要编码的字符串，默认为空</td>
</tr>
<tr>
<td>width</td>
<td>number</td>
<td>二维码的长，单位是px  需要注意的是，当使用table或者svg绘制二维码时，会适当减小，使得能够整除二维码矩阵的维度。  默认：256</td>
</tr>
<tr>
<td>height</td>
<td>number</td>
<td>同width</td>
</tr>
<tr>
<td>correctLevel</td>
<td>number</td>
<td>纠错级别，可取0、1、2、3，数字越大说明所需纠错级别越大，默认：3</td>
</tr>
<tr>
<td>background</td>
<td>color</td>
<td>背景色，默认：<code>#FFFFFF</code></td>
</tr>
<tr>
<td>foreground</td>
<td>color</td>
<td>前景色，默认：<code>#000000</code></td>
</tr>
</tbody>
</table>
<h2 id="u6D4F_u89C8_u5668_u517C_u5BB9_u6027"><a href="#u6D4F_u89C8_u5668_u517C_u5BB9_u6027" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h2><p>几乎支持所有浏览器： IE6~10, Chrome, Firefox, Safari, Opera, Mobile Safari, Android, Windows Mobile.</p>
<p>到这里，js生成二维码插件-QRCode.js就介绍完了，QRCode.js非常的方便好用。需要注意的的是QRCode初始化传入DOM对象时，必须是js原生的DOM对象，不能是jQuery的DOM对象的，否则就会报错。</p>
<h2 id="u9644"><a href="#u9644" class="headerlink" title="附"></a>附</h2><p>GitHub地址: <a href="https://github.com/davidshimjs/qrcodejs" target="_blank" rel="external">https://github.com/davidshimjs/qrcodejs</a><br>二维码生成原理：<a href="http://www.thonky.com/qr-code-tutorial/" target="_blank" rel="external">http://www.thonky.com/qr-code-tutorial/</a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="https://avatars1.githubusercontent.com/u/1829395?v=3&s=460" alt="Sphenginx" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Sphenginx</p>
        </div>
        <p class="site-description motion-element" itemprop="description">认真生活，开心工作！</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">42</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sphenginx" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/sphenginx" target="_blank">
                  
                    <i class="fa fa-globe"></i> weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2012 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sphenginx</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sphenginx"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  
  

</body>
</html>
